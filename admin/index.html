<!doctype html>
<html lang="en" data-theme="light">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Admin Dashboard - No Bhad Codes</title>
    <style>
      /* Inline fallbacks before main CSS loads - uses design system variables */
      :root {
        --page-bg: var(--color-neutral-300, #e0e0e0);
        --page-fg: var(--color-dark, #333333);
      }
      [data-theme='dark'] {
        --page-bg: var(--portal-bg-darkest, #1a1a1a);
        --page-fg: var(--portal-text-light, #f5f5f5);
      }
      html,
      body {
        background-color: var(--page-bg);
        color: var(--page-fg);
        margin: 0;
        padding: 0;
      }
    </style>
    <script>
      (function () {
        try {
          const savedTheme = localStorage.getItem('theme');
          document.documentElement.setAttribute('data-theme', savedTheme || 'light');
        } catch (e) {
          document.documentElement.setAttribute('data-theme', 'light');
        }
      })();
      (function () {
        var el = document.documentElement;
        var params = new URLSearchParams(window.location.search);
        var w = params.get('wireframe');
        if (w === '1') {
          el.setAttribute('data-wireframe', 'true');
          try { localStorage.setItem('wireframe', '1'); } catch (e) {}
        } else if (w === '0') {
          el.removeAttribute('data-wireframe');
          try { localStorage.removeItem('wireframe'); } catch (e) {}
        } else {
          try {
            if (localStorage.getItem('wireframe') === '1') {
              el.setAttribute('data-wireframe', 'true');
            }
          } catch (e) {}
        }

        if (w === '1' || w === '0') {
          try {
            params.delete('wireframe');
            var newUrl = window.location.pathname;
            var query = params.toString();
            if (query) newUrl += '?' + query;
            if (window.location.hash) newUrl += window.location.hash;
            window.history.replaceState({}, '', newUrl);
          } catch (e) {}
        }
      })();
    </script>
    <meta name="description" content="Admin Dashboard - Manage your site, leads, and analytics" />
    <meta name="robots" content="noindex, nofollow" />
    <link rel="icon" type="image/x-icon" href="/favicon.ico" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="manifest" href="/site.webmanifest" />
    <meta name="theme-color" content="#e0e0e0" />
    <script type="module" src="/src/admin.ts"></script>
  </head>
  <body data-page="admin">
    <!-- Skip to main content link for accessibility -->
    <a href="#admin-main" class="skip-link">Skip to main content</a>

    <!-- Header - Exact copy from main site, only visible on login page -->
    <header class="header admin-header">
      <div class="container is--full">
        <nav class="nav-row">
          <a href="/" aria-label="no bhad codes - Go to homepage" class="nav-logo-row"> no bhad codes </a>
          <div class="nav-row__right">
            <!-- CLIENT PORTAL BUTTON -->
            <button class="portal-button" aria-label="Client Portal Login" id="portal-trigger">
              <div class="icon-wrap">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                  <path d="M18 20a6 6 0 0 0-12 0"/><circle cx="12" cy="10" r="4"/><circle cx="12" cy="12" r="10"/>
                </svg>
              </div>
            </button>

            <button id="toggle-theme" class="theme-button" aria-label="Toggle dark/light theme">
              <div class="icon-wrap">
                <svg
                  class="theme-icon sun-icon"
                  width="20"
                  height="20"
                  viewBox="0 0 24 24"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                  aria-hidden="true"
                >
                  <circle cx="12" cy="12" r="5" stroke="currentColor" stroke-width="2"></circle>
                  <path
                    d="M12 2V4M12 20V22M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"
                    stroke="currentColor"
                    stroke-width="2"
                  ></path>
                </svg>
                <svg
                  class="theme-icon moon-icon"
                  width="20"
                  height="20"
                  viewBox="0 0 24 24"
                  fill="currentColor"
                  aria-hidden="true"
                >
                  <path d="M21 12.79A9 9 0 1 1 11.21 3A7 7 0 0 0 21 12.79z"></path>
                </svg>
              </div>
            </button>
            <button data-menu-toggle="" class="menu-button" aria-label="Toggle navigation menu" aria-expanded="false">
              <div class="icon-wrap">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="100%"
                  viewBox="0 0 16 16"
                  fill="none"
                  class="menu-button-icon"
                  aria-hidden="true"
                >
                  <path
                    d="M7.33333 16L7.33333 -3.2055e-07L8.66667 -3.78832e-07L8.66667 16L7.33333 16Z"
                    fill="currentColor"
                  ></path>
                  <path
                    d="M16 8.66667L-2.62269e-07 8.66667L-3.78832e-07 7.33333L16 7.33333L16 8.66667Z"
                    fill="currentColor"
                  ></path>
                  <path
                    d="M6 7.33333L7.33333 7.33333L7.33333 6C7.33333 6.73637 6.73638 7.33333 6 7.33333Z"
                    fill="currentColor"
                  ></path>
                  <path
                    d="M10 7.33333L8.66667 7.33333L8.66667 6C8.66667 6.73638 9.26362 7.33333 10 7.33333Z"
                    fill="currentColor"
                  ></path>
                  <path
                    d="M6 8.66667L7.33333 8.66667L7.33333 10C7.33333 9.26362 6.73638 8.66667 6 8.66667Z"
                    fill="currentColor"
                  ></path>
                  <path
                    d="M10 8.66667L8.66667 8.66667L8.66667 10C8.66667 9.26362 9.26362 8.66667 10 8.66667Z"
                    fill="currentColor"
                  ></path>
                </svg>
              </div>
              <div class="menu-button-text">
                <p class="p-large">Menu</p>
                <p class="p-large">Close</p>
              </div>
            </button>
          </div>
        </nav>
      </div>
    </header>

    <!-- MOBILE/OVERLAY NAVIGATION - Same as main site -->
    <nav data-nav="closed" class="nav admin-nav">
      <div data-menu-toggle="" class="overlay"></div>
      <div class="menu">
        <div class="menu-bg">
          <div class="bg-panel first"></div>
          <div class="bg-panel second"></div>
          <div class="bg-panel"></div>
        </div>
        <div class="menu-inner">
          <ul class="menu-list">
            <li class="menu-list-item">
              <a href="/" class="menu-link">
                <p class="menu-link-heading" data-text="home">home</p>
                <p class="eyebrow">00</p>
                <div class="menu-link-bg"></div>
              </a>
            </li>
            <li class="menu-list-item">
              <a href="/#/about" class="menu-link">
                <p class="menu-link-heading" data-text="about">about</p>
                <p class="eyebrow">01</p>
                <div class="menu-link-bg"></div>
              </a>
            </li>
            <li class="menu-list-item">
              <a href="/#/contact" class="menu-link">
                <p class="menu-link-heading" data-text="contact">contact</p>
                <p class="eyebrow">02</p>
                <div class="menu-link-bg"></div>
              </a>
            </li>
            <li class="menu-list-item">
              <a href="/#/projects" class="menu-link">
                <p class="menu-link-heading" data-text="projects">projects</p>
                <p class="eyebrow">03</p>
                <div class="menu-link-bg"></div>
              </a>
            </li>
          </ul>
          <div class="menu-details" data-menu-fade>
            <p class="p-small">Socials</p>
            <div class="socials-row">
              <a href="https://github.com/nobhad" target="_blank" rel="noopener noreferrer" class="p-large text-link">
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="social-icon" aria-hidden="true">
                  <path d="M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"/>
                  <path d="M9 18c-4.51 2-5-2-7-2"/>
                </svg>
                GitHub
              </a>
              <a href="https://www.linkedin.com/in/noelle-b-676286106/" target="_blank" rel="noopener noreferrer" class="p-large text-link">
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="social-icon" aria-hidden="true">
                  <path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"/>
                  <rect width="4" height="12" x="2" y="9"/>
                  <circle cx="4" cy="4" r="2"/>
                </svg>
                LinkedIn
              </a>
            </div>
          </div>
        </div>
      </div>
    </nav>

    <!-- Auth Gate - Login Form -->
    <div class="auth-gate" id="auth-gate">
      <div class="auth-gate-container">
        <div class="auth-gate-header">
          <img src="/images/avatar.svg" alt="No Bhad Codes" class="auth-gate-logo" />
          <h1>Admin Access</h1>
          <p>Enter your admin password to continue</p>
        </div>
        <form class="auth-gate-form" id="admin-login-form">
          <!-- Hidden username field for accessibility and password managers -->
          <input
            type="email"
            id="admin-username"
            name="username"
            value="admin@nobhad.codes"
            autocomplete="username"
            tabindex="-1"
            aria-hidden="true"
            style="position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0, 0, 0, 0); border: 0;"
          />
          <div class="form-group">
            <label for="admin-password" class="sr-only">Admin Password</label>
            <div class="password-input-wrapper">
              <input
                type="password"
                id="admin-password"
                name="password"
                placeholder="Admin Password"
                required
                autocomplete="current-password"
              />
              <button type="button" class="password-toggle" id="password-toggle" aria-label="Toggle password visibility">
                <svg class="eye-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                  <circle cx="12" cy="12" r="3"></circle>
                </svg>
              </button>
            </div>
          </div>
          <div class="auth-error" id="auth-error"></div>
          <button type="submit" class="btn btn-primary auth-submit">
            <span class="btn-text">Sign In</span>
            <span class="btn-loading" style="display: none;">Signing in...</span>
          </button>
        </form>
      </div>
    </div>

    <script>
      // Toggle auth button state based on input
      document.addEventListener('DOMContentLoaded', function() {
        const passwordInput = document.getElementById('admin-password');
        const submitBtn = document.querySelector('.auth-submit');
        if (passwordInput && submitBtn) {
          passwordInput.addEventListener('input', function() {
            if (this.value.trim().length > 0) {
              submitBtn.classList.add('active');
            } else {
              submitBtn.classList.remove('active');
            }
          });
        }
      });
    </script>

    <!-- Dashboard Layout (same structure as client portal) -->
    <div class="dashboard-container hidden" id="admin-dashboard">

      <!-- Full-Width Global Header -->
      <header class="portal-global-header">
        <div class="portal-global-header-left">
          <a href="/" class="header-logo" aria-label="Go to homepage">NO BHAD CODES</a>
          <span class="header-separator"></span>
          <nav class="breadcrumb-nav header-breadcrumb-nav" aria-label="Breadcrumb">
            <ul id="breadcrumb-list" class="breadcrumb-list"></ul>
          </nav>
        </div>
        <div class="portal-global-header-right">
          <button id="header-toggle-theme" class="header-theme-toggle" aria-label="Toggle dark/light theme">
            <svg class="theme-icon sun-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
              <circle cx="12" cy="12" r="5" stroke="currentColor" stroke-width="2"></circle>
              <path d="M12 2V4M12 20V22M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" stroke="currentColor" stroke-width="2"></path>
            </svg>
            <svg class="theme-icon moon-icon" width="20" height="20" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
              <path d="M21 12.79A9 9 0 1 1 11.21 3A7 7 0 0 0 21 12.79z"></path>
            </svg>
          </button>
        </div>
      </header>

      <!-- Portal Body: Sidebar + Content -->
      <div class="portal-body">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
          <!-- Collapsed state avatar link (hidden by global header) -->
          <a href="/" class="sidebar-collapsed-logo" aria-label="Go to home">
            <img src="/images/avatar_small_sidebar.svg" alt="No Bhad Codes" class="sidebar-collapsed-logo-img" />
          </a>
          <div class="sidebar-content">
            <!-- Logo (hidden by global header) -->
            <a href="/" class="sidebar-logo">
              <img src="/images/avatar.svg" alt="No Bhad Codes" class="sidebar-logo-img" />
            </a>

            <!-- Admin Navigation Buttons -->
            <div class="sidebar-buttons">
              <!-- Sidebar Toggle (first button) -->
              <button class="btn btn-secondary sidebar-toggle-btn" id="btn-sidebar-toggle" aria-label="Toggle sidebar">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="btn-icon" aria-hidden="true">
                  <rect x="3" y="3" width="7" height="18" rx="1"/>
                  <path d="M15 3h6a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1h-6"/>
                </svg>
                <span class="btn-text">TOGGLE</span>
              </button>
              <button class="btn btn-secondary active" id="btn-overview" data-tab="overview" aria-label="Dashboard">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="btn-icon"><path d="m12 14 4-4"/><path d="M3.34 19a10 10 0 1 1 17.32 0"/></svg>
              <span class="btn-text">DASHBOARD</span>
            </button>
            <button class="btn btn-secondary" id="btn-work" data-tab="work" aria-label="Work">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="btn-icon"><rect width="20" height="14" x="2" y="7" rx="2" ry="2"/><path d="M16 7V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v2"/></svg>
              <span class="btn-text">WORK</span>
            </button>
            <button class="btn btn-secondary" id="btn-crm" data-tab="crm" aria-label="CRM">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="btn-icon"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>
              <span class="btn-text">CRM</span>
              <span class="sidebar-badge" id="crm-badge" style="display: none;"></span>
            </button>
            <button class="btn btn-secondary" id="btn-documents" data-tab="documents" aria-label="Documents">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="btn-icon"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><path d="M14 2v6h6"/><path d="M16 13H8"/><path d="M16 17H8"/><path d="M10 9H8"/></svg>
              <span class="btn-text">DOCUMENTS</span>
            </button>
            <button class="btn btn-secondary" id="btn-workflows" data-tab="workflows" aria-label="Workflows">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="btn-icon"><path d="M3 3v18h18"/><path d="m19 9-5 5-4-4-3 3"/></svg>
              <span class="btn-text">WORKFLOWS</span>
            </button>
            <button class="btn btn-secondary" id="btn-analytics" data-tab="analytics" aria-label="Analytics">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="btn-icon"><line x1="18" y1="20" x2="18" y2="10"/><line x1="12" y1="20" x2="12" y2="4"/><line x1="6" y1="20" x2="6" y2="14"/></svg>
              <span class="btn-text">ANALYTICS</span>
            </button>
            <button class="btn btn-secondary" id="btn-support" data-tab="support" aria-label="Knowledge Base">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="btn-icon"><circle cx="12" cy="12" r="10"/><path d="M8.5 8.5a4 4 0 0 1 7 3c0 2-3 3-3 3"/><path d="M12 17h.01"/></svg>
              <span class="btn-text">KNOWLEDGE BASE</span>
            </button>
            <button class="btn btn-secondary" id="btn-system" data-tab="system" aria-label="System Status">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="btn-icon"><circle cx="12" cy="12" r="3"/><path d="M12 1v6m0 6v10"/><path d="m4.93 4.93 4.24 4.24m5.66 5.66 4.24 4.24"/><path d="M1 12h6m6 0h10"/><path d="m4.93 19.07 4.24-4.24m5.66-5.66 4.24-4.24"/></svg>
              <span class="btn-text">SYSTEM</span>
            </button>
          </div>

          <!-- Sign Out Button -->
          <div class="sidebar-footer">
            <button type="button" class="btn btn-secondary btn-logout" id="btn-logout" aria-label="Sign out" onclick="window.adminDashboard?.handleLogout?.() || (window.location.href = '/admin')">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="btn-icon"><path d="m16 17 5-5-5-5"/><path d="M21 12H9"/><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/></svg>
              <span class="btn-text">SIGN OUT</span>
            </button>
          </div>
        </div>
      </aside>

      <!-- Secondary Sidebar (shown for multi-tab detail pages) -->
      <aside id="secondary-sidebar">
        <!-- Populated dynamically by createSecondarySidebar() -->
      </aside>

      <!-- Horizontal Tabs Fallback (mobile, when secondary sidebar is hidden) -->
      <div id="secondary-tabs-horizontal">
        <!-- Populated dynamically by createSecondarySidebar() -->
      </div>

      <!-- Content Area -->
      <div class="dashboard-content" id="dashboard-content">
        <div class="content-wrapper">
          <!-- Portal Page Header - Title and subtabs only (breadcrumbs in global header) -->
          <header class="portal-page-header">
            <div class="portal-header-title">
              <h1 id="admin-page-title">Dashboard</h1>
              <!-- Header Subtabs (shown for Analytics and Workflows tabs) -->
              <div class="header-subtabs">
                <!-- Work subtabs -->
                <div class="portal-subtabs header-subtab-group" data-for-tab="work" data-mode="primary">
                  <button class="portal-subtab active" data-subtab="projects">Projects</button>
                  <button class="portal-subtab" data-subtab="tasks">Tasks</button>
                  <button class="portal-subtab" data-subtab="ad-hoc-requests">Requests</button>
                </div>
                <!-- CRM subtabs -->
                <div class="portal-subtabs header-subtab-group" data-for-tab="crm" data-mode="primary">
                  <button class="portal-subtab active" data-subtab="leads">Leads</button>
                  <button class="portal-subtab" data-subtab="contacts">Contacts</button>
                  <button class="portal-subtab" data-subtab="messages">Messages</button>
                  <button class="portal-subtab" data-subtab="clients">Clients</button>
                </div>
                <!-- Documents subtabs -->
                <div class="portal-subtabs header-subtab-group" data-for-tab="documents" data-mode="primary">
                  <button class="portal-subtab active" data-subtab="invoices">Invoices</button>
                  <button class="portal-subtab" data-subtab="contracts">Contracts</button>
                  <button class="portal-subtab" data-subtab="document-requests">Document Requests</button>
                  <button class="portal-subtab" data-subtab="questionnaires">Questionnaires</button>
                </div>
                <!-- Support subtabs - removed, using view toggle instead -->
                <!-- Analytics subtabs -->
                <div class="analytics-subtabs header-subtab-group" data-for-tab="analytics">
                  <button type="button" class="analytics-subtab active" data-subtab="overview">Overview</button>
                  <button type="button" class="analytics-subtab" data-subtab="business">Business</button>
                  <button type="button" class="analytics-subtab" data-subtab="visitors">Visitors</button>
                  <button type="button" class="analytics-subtab" data-subtab="reports">Reports & Alerts</button>
                </div>
                <!-- Workflows subtabs -->
                <div class="portal-subtabs header-subtab-group" data-for-tab="workflows" id="workflows-subtabs">
                  <button class="portal-subtab active" data-subtab="approvals">Approvals</button>
                  <button class="portal-subtab" data-subtab="triggers">Triggers</button>
                  <button class="portal-subtab" data-subtab="email-templates">Email Templates</button>
                </div>
                <!-- Knowledge Base view toggle -->
                <div class="header-controls header-subtab-group" data-for-tab="knowledge-base">
                  <div id="kb-section-toggle-mount"></div>
                </div>
              </div>
            </div>
          </header>
          <!-- Overview Tab (Default) - Content rendered dynamically by admin-overview.ts -->
          <div class="tab-content active" id="tab-overview">
            <!-- Content rendered dynamically by renderOverviewTab() -->
          </div>

          <!-- Leads Tab - Content rendered dynamically by admin-leads.ts -->
          <div class="tab-content" id="tab-leads">
            <!-- Content rendered dynamically by renderLeadsTab() -->
          </div>

          <!-- Contacts Tab - Content rendered dynamically by admin-contacts.ts -->
          <div class="tab-content" id="tab-contacts">
            <!-- Content rendered dynamically by renderContactsTab() -->
          </div>

          <!-- Projects Tab - Content rendered dynamically by admin-projects.ts -->
          <div class="tab-content" id="tab-projects">
            <!-- Content rendered dynamically by renderProjectsTab() -->
          </div>

          <!-- Clients Tab - Content rendered dynamically by admin-clients.ts -->
          <div class="tab-content" id="tab-clients">
            <!-- Content rendered dynamically by renderClientsTab() -->
          </div>

          <!-- Invoices Tab - Content rendered dynamically by admin-invoices.ts -->
          <div class="tab-content" id="tab-invoices">
            <!-- Content rendered dynamically by renderInvoicesTab() -->
          </div>

          <!-- Contracts Tab - Content rendered dynamically by admin-contracts.ts -->
          <div class="tab-content" id="tab-contracts">
            <!-- Content rendered dynamically by renderContractsTab() -->
          </div>

          <!-- Ad Hoc Requests Tab - Content rendered dynamically by admin-ad-hoc-requests.ts -->
          <div class="tab-content" id="tab-ad-hoc-requests">
            <!-- Content rendered dynamically by renderAdHocRequestsTab() -->
          </div>

          <!-- Tasks Tab (Global) - Content rendered dynamically by admin-global-tasks.ts -->
          <div class="tab-content" id="tab-tasks">
            <!-- Content rendered dynamically by renderGlobalTasksTab() -->
          </div>

          <!-- Client Detail View - Content rendered dynamically by admin-client-details.ts -->
          <div class="tab-content" id="tab-client-detail">
            <!-- Content rendered dynamically by renderClientDetailTab() -->
          </div>

          <!-- Messages Tab -->
          <!-- Messages Tab - Content rendered dynamically by admin-messaging.ts -->
          <div class="tab-content" id="tab-messages">
            <!-- Content rendered dynamically by renderMessagesTab() -->
          </div>

          <!-- Analytics Tab - Content rendered dynamically by admin-analytics.ts -->
          <div class="tab-content" id="tab-analytics">
            <!-- Content rendered dynamically by renderAnalyticsTab() -->
          </div>


          <!-- Document Requests Tab - Content rendered dynamically by admin-document-requests.ts -->
          <div class="tab-content" id="tab-document-requests">
            <!-- Content rendered dynamically by renderDocumentRequestsTab() -->
          </div>

          <!-- Questionnaires Tab - Content rendered dynamically by admin-questionnaires.ts -->
          <div class="tab-content" id="tab-questionnaires">
            <!-- Content rendered dynamically by renderQuestionnairesTab() -->
          </div>

          <!-- Knowledge Base Tab - Content rendered dynamically by admin-knowledge-base.ts -->
          <div class="tab-content" id="tab-knowledge-base">
            <!-- Content rendered dynamically by renderKnowledgeBaseTab() -->
          </div>

          <!-- System Status Tab - Content rendered dynamically by admin-system-status.ts -->
          <div class="tab-content" id="tab-system">
            <!-- Content rendered dynamically by renderSystemStatusTab() -->
          </div>

          <!-- Project Detail View - Content rendered dynamically by admin-project-details.ts -->
          <div class="tab-content" id="tab-project-detail">
            <!-- Content rendered dynamically by renderProjectDetailTab() -->
          </div>

          <!-- Workflows Tab - Content rendered dynamically by admin-workflows.ts -->
          <div class="tab-content" id="tab-workflows">
            <!-- Content rendered dynamically by renderWorkflowsTab() -->
          </div>
        </div>
      </div>
      </div> <!-- Close portal-body -->
    </div>

    <!-- Details Overlay (darkens page when panel is open) -->
    <div class="details-overlay hidden" id="details-overlay" onclick="window.closeDetailsPanel && window.closeDetailsPanel()"></div>

    <!-- Lead Details Panel (Hidden by default) -->
    <div class="details-panel hidden" id="lead-details-panel"></div>

    <!-- Contact Details Panel (Hidden by default) -->
    <div class="details-panel hidden" id="contact-details-panel"></div>

    <!-- Detail Modal for Leads/Contacts -->
    <div class="admin-modal-overlay hidden" id="detail-modal" role="dialog" aria-modal="true" aria-labelledby="modal-title">
      <div class="admin-modal">
        <div class="admin-modal-header">
          <div class="admin-modal-title">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/></svg>
            <h2 id="modal-title">Details</h2>
          </div>
          <button class="admin-modal-close" id="modal-close-btn" aria-label="Close modal">
            &times;
          </button>
        </div>
        <div class="admin-modal-body" id="modal-body">
          <!-- Dynamic content will be inserted here -->
        </div>
        <div class="admin-modal-footer">
          <button class="btn btn-secondary" id="modal-close-btn-footer">Close</button>
        </div>
      </div>
    </div>

    <!-- Add Client Modal -->
    <div class="admin-modal-overlay hidden" id="add-client-modal" role="dialog" aria-modal="true" aria-labelledby="add-client-modal-title">
      <div class="admin-modal">
        <div class="admin-modal-header">
          <div class="admin-modal-title">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><line x1="19" x2="19" y1="8" y2="14"/><line x1="22" x2="16" y1="11" y2="11"/></svg>
            <h2 id="add-client-modal-title">Add New Client</h2>
          </div>
          <button class="admin-modal-close" id="add-client-modal-close" aria-label="Close modal">
            &times;
          </button>
        </div>
        <form id="add-client-form">
          <div class="admin-modal-body">
            <fieldset>
              <legend>Contact Information</legend>
              <div class="form-group">
                <label class="field-label" for="new-client-email">Email *</label>
                <input type="email" id="new-client-email" class="form-input" placeholder="client@example.com" required />
              </div>
              <div class="form-group">
                <label class="field-label" for="new-client-name">Contact Name</label>
                <input type="text" id="new-client-name" class="form-input" placeholder="John Smith" />
              </div>
              <div class="form-group">
                <label class="field-label" for="new-client-company">Company Name</label>
                <input type="text" id="new-client-company" class="form-input" placeholder="Acme Inc." />
              </div>
              <div class="form-group">
                <label class="field-label" for="new-client-phone">Phone</label>
                <input type="tel" id="new-client-phone" class="form-input" placeholder="(555) 123-4567" />
              </div>
            </fieldset>
          </div>
          <div class="admin-modal-footer">
            <button type="button" class="btn btn-secondary" id="add-client-cancel">Cancel</button>
            <button type="submit" class="btn btn-primary">Add Client</button>
          </div>
        </form>
      </div>
    </div>

    <!-- Add Project Modal -->
    <div class="admin-modal-overlay hidden" id="add-project-modal" role="dialog" aria-modal="true" aria-labelledby="add-project-modal-title">
      <div class="admin-modal">
        <div class="admin-modal-header">
          <div class="admin-modal-title">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 10v6"/><path d="M9 13h6"/><path d="M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2h16Z"/></svg>
            <h2 id="add-project-modal-title">Add New Project</h2>
          </div>
          <button class="admin-modal-close" id="add-project-modal-close" aria-label="Close modal">
            &times;
          </button>
        </div>
        <form id="add-project-form">
          <div class="admin-modal-body">
            <!-- Client Selection -->
            <div class="form-group">
              <label class="field-label" for="new-project-client">Client *</label>
              <div id="new-project-client-mount"></div>
            </div>

            <!-- New Client Fields (hidden by default) -->
            <fieldset id="new-client-fields" class="hidden">
              <legend>New Client Details</legend>
              <div class="form-group">
                <label class="field-label" for="new-project-client-name">Contact Name *</label>
                <input type="text" id="new-project-client-name" class="form-input" placeholder="John Smith" />
              </div>
              <div class="form-group">
                <label class="field-label" for="new-project-client-email">Email *</label>
                <input type="email" id="new-project-client-email" class="form-input" placeholder="client@example.com" />
              </div>
              <div class="form-group">
                <label class="field-label" for="new-project-client-company">Company Name</label>
                <input type="text" id="new-project-client-company" class="form-input" placeholder="Acme Inc." />
              </div>
              <div class="form-group">
                <label class="field-label" for="new-project-client-phone">Phone</label>
                <input type="tel" id="new-project-client-phone" class="form-input" placeholder="(555) 123-4567" />
              </div>
            </fieldset>

            <!-- Project Fields -->
            <div class="form-group">
              <label class="field-label" for="new-project-type">Project Type *</label>
              <div id="new-project-type-mount"></div>
            </div>
            <div class="form-group">
              <label class="field-label" for="new-project-description">Description *</label>
              <textarea id="new-project-description" class="form-textarea" rows="3" placeholder="Brief project description..." required></textarea>
            </div>
            <div class="form-group">
              <label class="field-label" for="new-project-budget">Budget *</label>
              <div id="new-project-budget-mount"></div>
            </div>
            <div class="form-group">
              <label class="field-label" for="new-project-timeline">Timeline *</label>
              <div id="new-project-timeline-mount"></div>
            </div>
            <div class="form-group">
              <label class="field-label" for="new-project-notes">Additional Notes</label>
              <textarea id="new-project-notes" class="form-textarea" rows="2" placeholder="Any additional details..."></textarea>
            </div>
          </div>
          <div class="admin-modal-footer">
            <button type="button" class="btn btn-secondary" id="add-project-cancel">Cancel</button>
            <button type="submit" class="btn btn-primary">Add Project</button>
          </div>
        </form>
      </div>
    </div>

    <!-- Edit Client Info Modal -->
    <div class="admin-modal-overlay hidden" id="edit-client-info-modal" role="dialog" aria-modal="true" aria-labelledby="edit-client-info-title">
      <div class="admin-modal">
        <div class="admin-modal-header">
          <div class="admin-modal-title">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"/><path d="m15 5 4 4"/></svg>
            <h2 id="edit-client-info-title">Edit Client Info</h2>
          </div>
          <button class="admin-modal-close" id="edit-client-info-close" aria-label="Close modal">
            &times;
          </button>
        </div>
        <form id="edit-client-info-form">
          <div class="admin-modal-body">
            <div class="form-group">
              <label class="field-label" for="edit-client-email">Email</label>
              <input type="email" id="edit-client-email" class="form-input" placeholder="client@example.com" />
            </div>
            <div class="form-group">
              <label class="field-label" for="edit-client-name">Contact Name</label>
              <input type="text" id="edit-client-name" class="form-input" placeholder="John Smith" />
            </div>
            <div class="form-group">
              <label class="field-label" for="edit-client-company">Company Name</label>
              <input type="text" id="edit-client-company" class="form-input" placeholder="Acme Inc." />
            </div>
            <div class="form-group">
              <label class="field-label" for="edit-client-phone">Phone</label>
              <input type="tel" id="edit-client-phone" class="form-input" placeholder="(555) 123-4567" />
            </div>
            <div class="form-group">
              <label class="field-label" for="edit-client-status">Status</label>
              <div id="edit-client-status-mount"></div>
            </div>
          </div>
          <div class="admin-modal-footer">
            <button type="button" class="btn btn-secondary" id="edit-client-info-cancel">Cancel</button>
            <button type="submit" class="btn btn-primary">Save Changes</button>
          </div>
        </form>
      </div>
    </div>

    <!-- Edit Billing Details Modal -->
    <div class="admin-modal-overlay hidden" id="edit-billing-modal" role="dialog" aria-modal="true" aria-labelledby="edit-billing-title">
      <div class="admin-modal">
        <div class="admin-modal-header">
          <div class="admin-modal-title">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="20" height="14" x="2" y="5" rx="2"/><line x1="2" x2="22" y1="10" y2="10"/></svg>
            <h2 id="edit-billing-title">Edit Billing Details</h2>
          </div>
          <button class="admin-modal-close" id="edit-billing-close" aria-label="Close modal">
            &times;
          </button>
        </div>
        <form id="edit-billing-form">
          <div class="admin-modal-body">
            <div class="form-group">
              <label class="field-label" for="edit-billing-name">Billing Name</label>
              <input type="text" id="edit-billing-name" class="form-input" placeholder="John Smith" />
            </div>
            <div class="form-group">
              <label class="field-label" for="edit-billing-email">Billing Email</label>
              <input type="email" id="edit-billing-email" class="form-input" placeholder="billing@example.com" />
            </div>
            <div class="form-group">
              <label class="field-label" for="edit-billing-address">Address</label>
              <input type="text" id="edit-billing-address" class="form-input" placeholder="123 Main St" />
            </div>
            <div class="form-row">
              <div class="form-group">
                <label class="field-label" for="edit-billing-city">City</label>
                <input type="text" id="edit-billing-city" class="form-input" placeholder="New York" />
              </div>
              <div class="form-group">
                <label class="field-label" for="edit-billing-state">State/Province</label>
                <input type="text" id="edit-billing-state" class="form-input" placeholder="NY" />
              </div>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label class="field-label" for="edit-billing-zip">ZIP/Postal Code</label>
                <input type="text" id="edit-billing-zip" class="form-input" placeholder="10001" />
              </div>
              <div class="form-group">
                <label class="field-label" for="edit-billing-country">Country</label>
                <input type="text" id="edit-billing-country" class="form-input" placeholder="USA" />
              </div>
            </div>
          </div>
          <div class="admin-modal-footer">
            <button type="button" class="btn btn-secondary" id="edit-billing-cancel">Cancel</button>
            <button type="submit" class="btn btn-primary">Save Changes</button>
          </div>
        </form>
      </div>
    </div>

    <!-- Edit Project Modal -->
    <div class="admin-modal-overlay hidden" id="edit-project-modal" role="dialog" aria-modal="true" aria-labelledby="edit-project-modal-title">
      <div class="admin-modal">
        <div class="admin-modal-header">
          <div class="admin-modal-title">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"/><path d="m15 5 4 4"/></svg>
            <h2 id="edit-project-modal-title">Edit Project</h2>
          </div>
          <button class="admin-modal-close" id="edit-project-close" aria-label="Close modal">
            &times;
          </button>
        </div>
        <form id="edit-project-form">
          <div class="admin-modal-body">
            <!-- Project Basics -->
            <div class="form-group">
              <label class="field-label" for="edit-project-name">Project Name</label>
              <input type="text" id="edit-project-name" class="form-input" placeholder="Project Name" />
            </div>
            <div class="form-row">
              <div class="form-group">
                <label class="field-label" for="edit-project-type">Project Type</label>
                <div id="edit-project-type-mount"></div>
              </div>
              <div class="form-group">
                <label class="field-label" for="edit-project-status">Status</label>
                <div id="edit-project-status-mount"></div>
              </div>
            </div>

            <!-- Timeline -->
            <div class="form-group">
              <label class="field-label" for="edit-project-timeline">Timeline</label>
              <input type="text" id="edit-project-timeline" class="form-input" placeholder="4-6 weeks" />
            </div>
            <div class="form-row">
              <div class="form-group">
                <label class="field-label" for="edit-project-start-date">Start Date</label>
                <input type="date" id="edit-project-start-date" class="form-input" />
              </div>
              <div class="form-group">
                <label class="field-label" for="edit-project-end-date">Target End Date</label>
                <input type="date" id="edit-project-end-date" class="form-input" />
              </div>
            </div>

            <!-- Description -->
            <div class="form-group">
              <label class="field-label" for="edit-project-description">Project Description</label>
              <textarea id="edit-project-description" class="form-textarea" rows="4" placeholder="Describe the project scope and requirements..."></textarea>
            </div>

            <!-- Financial -->
            <div class="form-row">
              <div class="form-group">
                <label class="field-label" for="edit-project-budget">Client Budget</label>
                <input type="text" id="edit-project-budget" class="form-input" placeholder="Under 1k, 1000-2500, etc." />
              </div>
              <div class="form-group">
                <label class="field-label" for="edit-project-price">Quoted Price</label>
                <input type="text" id="edit-project-price" class="form-input" placeholder="$7,500" />
              </div>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label class="field-label" for="edit-project-deposit">Deposit Amount</label>
                <input type="text" id="edit-project-deposit" class="form-input" placeholder="$1,000" />
              </div>
              <div class="form-group">
                <label class="field-label" for="edit-project-contract-date">Contract Signed</label>
                <input type="date" id="edit-project-contract-date" class="form-input" />
              </div>
            </div>

            <!-- URLs -->
            <div class="form-group">
              <label class="field-label" for="edit-project-preview-url">Preview URL</label>
              <input type="url" id="edit-project-preview-url" class="form-input" placeholder="https://preview.example.com" />
            </div>
            <div class="form-group">
              <label class="field-label" for="edit-project-repo-url">Repository URL</label>
              <input type="url" id="edit-project-repo-url" class="form-input" placeholder="https://github.com/..." />
            </div>
            <div class="form-group">
              <label class="field-label" for="edit-project-production-url">Production URL</label>
              <input type="url" id="edit-project-production-url" class="form-input" placeholder="https://example.com" />
            </div>
            <div class="form-group">
              <label class="field-label" for="edit-project-notes">Admin Notes (internal)</label>
              <textarea id="edit-project-notes" class="form-textarea" rows="3" placeholder="Internal notes not visible to client..."></textarea>
            </div>
          </div>
          <div class="admin-modal-footer">
            <button type="button" class="btn btn-secondary" id="edit-project-cancel">Cancel</button>
            <button type="submit" class="btn btn-primary">Save Changes</button>
          </div>
        </form>
      </div>
    </div>

    <!-- Footer - Only visible on login page -->
    <footer class="footer admin-footer">
      <div class="footer-content">
        <p>&copy; <span id="admin-copyright-year"></span> No Bhad Codes. All rights reserved.</p>
      </div>
    </footer>
    <script>
      document.getElementById('admin-copyright-year').textContent = new Date().getFullYear();
    </script>
  </body>
</html>
