<!doctype html>
<html lang="en" data-theme="light">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Admin Dashboard - No Bhad Codes</title>
    <style>
      :root {
        --bg: #ffffff;
        --fg: #000000;
      }
      [data-theme='dark'] {
        --bg: #1a1a1a;
        --fg: #ffffff;
      }
      html,
      body {
        background-color: var(--bg);
        color: var(--fg);
        margin: 0;
        padding: 0;
      }
    </style>
    <script>
      (function () {
        try {
          const savedTheme = localStorage.getItem('theme');
          document.documentElement.setAttribute('data-theme', savedTheme || 'light');
        } catch (e) {
          document.documentElement.setAttribute('data-theme', 'light');
        }
      })();
    </script>
    <meta name="description" content="Admin Dashboard - Manage your site, leads, and analytics" />
    <meta name="robots" content="noindex, nofollow" />
    <link rel="icon" type="image/x-icon" href="/favicon.ico" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="manifest" href="/site.webmanifest" />
    <meta name="theme-color" content="#e0e0e0" />
    <script type="module" src="/src/main.ts"></script>
  </head>
  <body data-page="admin">
    <!-- Auth Gate - Login Form -->
    <div class="auth-gate" id="auth-gate">
      <div class="auth-gate-container">
        <div class="auth-gate-header">
          <h1>Admin Access</h1>
          <p>Enter your admin password to continue</p>
        </div>
        <form class="auth-gate-form" id="admin-login-form">
          <div class="form-group">
            <label for="admin-password" class="visually-hidden">Admin Password</label>
            <div class="password-input-wrapper">
              <input
                type="password"
                id="admin-password"
                name="password"
                placeholder="Admin Password"
                required
                autocomplete="current-password"
              />
              <button type="button" class="password-toggle" id="password-toggle" aria-label="Toggle password visibility">
                <svg class="eye-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                  <circle cx="12" cy="12" r="3"></circle>
                </svg>
              </button>
            </div>
          </div>
          <div class="auth-error" id="auth-error"></div>
          <button type="submit" class="btn btn-primary auth-submit">
            <span class="btn-text">Sign In</span>
            <span class="btn-loading" style="display: none;">Signing in...</span>
          </button>
        </form>
        <a href="/" class="back-link">Back to site</a>
      </div>
    </div>

    <!-- Dashboard Layout (same structure as client portal) -->
    <div class="dashboard-container" id="admin-dashboard" style="display: none;">
      <!-- Mobile Header Bar -->
      <header class="mobile-header" id="mobile-header">
        <button class="mobile-menu-toggle" id="mobile-menu-toggle" aria-label="Toggle menu">
          <span class="hamburger-line"></span>
          <span class="hamburger-line"></span>
          <span class="hamburger-line"></span>
        </button>
        <h1 class="mobile-header-title" id="mobile-header-title">Admin</h1>
      </header>

      <!-- Mobile Overlay -->
      <div class="mobile-overlay" id="mobile-overlay"></div>

      <!-- Sidebar -->
      <aside class="sidebar" id="sidebar">
        <!-- Mobile Close Button -->
        <button class="sidebar-close-btn" id="sidebar-close-btn" aria-label="Close menu">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
        <!-- Collapsed state avatar link -->
        <a href="/" class="sidebar-collapsed-logo" aria-label="Go to home">
          <img src="/images/avatar.svg" alt="No Bhad Codes" class="sidebar-collapsed-logo-img" />
        </a>
        <div class="sidebar-content">
          <!-- Logo -->
          <a href="/" class="sidebar-logo">
            <img src="/images/avatar.svg" alt="No Bhad Codes" class="sidebar-logo-img" />
          </a>

          <!-- Admin Navigation Buttons -->
          <div class="sidebar-buttons">
            <button class="btn btn-secondary active" id="btn-overview" data-tab="overview">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="btn-icon"><path d="m12 14 4-4"/><path d="M3.34 19a10 10 0 1 1 17.32 0"/></svg>
              <span class="btn-text">DASHBOARD</span>
            </button>
            <button class="btn btn-secondary" id="btn-leads" data-tab="leads">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="btn-icon"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>
              <span class="btn-text">LEADS</span>
            </button>
            <button class="btn btn-secondary" id="btn-projects" data-tab="projects">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="btn-icon"><path d="M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z"/></svg>
              <span class="btn-text">PROJECTS</span>
            </button>
            <button class="btn btn-secondary" id="btn-messages" data-tab="messages">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="btn-icon"><path d="M16 10a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 14.286V4a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"/><path d="M20 9a2 2 0 0 1 2 2v10.286a.71.71 0 0 1-1.212.502l-2.202-2.202A2 2 0 0 0 17.172 19H10a2 2 0 0 1-2-2v-1"/></svg>
              <span class="btn-text">MESSAGES</span>
            </button>
            <button class="btn btn-secondary" id="btn-analytics" data-tab="analytics">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="btn-icon"><line x1="18" y1="20" x2="18" y2="10"/><line x1="12" y1="20" x2="12" y2="4"/><line x1="6" y1="20" x2="6" y2="14"/></svg>
              <span class="btn-text">ANALYTICS</span>
            </button>
            <button class="btn btn-secondary" id="btn-system" data-tab="system">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="btn-icon"><circle cx="12" cy="12" r="3"/><path d="M12 1v6m0 6v10"/><path d="m4.93 4.93 4.24 4.24m5.66 5.66 4.24 4.24"/><path d="M1 12h6m6 0h10"/><path d="m4.93 19.07 4.24-4.24m5.66-5.66 4.24-4.24"/></svg>
              <span class="btn-text">SYSTEM</span>
            </button>
          </div>

          <!-- Sign Out Button -->
          <div class="sidebar-footer">
            <button class="btn btn-secondary btn-logout" id="btn-logout">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="btn-icon"><path d="m16 17 5-5-5-5"/><path d="M21 12H9"/><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/></svg>
              <span class="btn-text">SIGN OUT</span>
            </button>
          </div>
        </div>
      </aside>

      <!-- Content Area -->
      <div class="dashboard-content" id="dashboard-content">
        <div class="content-wrapper">
          <!-- Overview Tab (Default) -->
          <div class="tab-content active" id="tab-overview">
            <div class="page-header">
              <button class="header-sidebar-toggle" aria-label="Toggle sidebar">&#9664;</button>
              <h2>Admin Dashboard</h2>
            </div>

            <!-- Lead Stats (Clickable) -->
            <div class="quick-stats">
              <button
                class="stat-card stat-card-clickable portal-shadow"
                data-tab="leads"
                type="button"
              >
                <span class="stat-number" id="stat-total-leads">-</span>
                <span class="stat-label">Total Leads</span>
              </button>
              <button
                class="stat-card stat-card-clickable portal-shadow"
                data-tab="leads"
                type="button"
              >
                <span class="stat-number" id="stat-pending-leads">-</span>
                <span class="stat-label">Pending</span>
              </button>
              <button
                class="stat-card stat-card-clickable portal-shadow"
                data-tab="analytics"
                type="button"
              >
                <span class="stat-number" id="stat-visitors">-</span>
                <span class="stat-label">Visitors Today</span>
              </button>
              <button
                class="stat-card stat-card-clickable portal-shadow"
                data-tab="messages"
                type="button"
              >
                <span class="stat-number" id="stat-messages">-</span>
                <span class="stat-label">Messages</span>
              </button>
            </div>

            <!-- Visitor Analytics Stats -->
            <div class="analytics-overview portal-shadow">
              <h3>Weekly Overview</h3>
              <div class="overview-stats-grid">
                <div class="overview-stat">
                  <span class="stat-number" id="total-visitors">-</span>
                  <span class="stat-label">Total Visitors</span>
                  <span class="metric-change" id="visitors-change">-</span>
                </div>
                <div class="overview-stat">
                  <span class="stat-number" id="page-views">-</span>
                  <span class="stat-label">Page Views</span>
                  <span class="metric-change" id="views-change">-</span>
                </div>
                <div class="overview-stat">
                  <span class="stat-number" id="avg-session">-</span>
                  <span class="stat-label">Avg. Session</span>
                  <span class="metric-change" id="session-change">-</span>
                </div>
              </div>
            </div>

            <!-- Recent Leads -->
            <div class="recent-activity portal-shadow">
              <h3>Recent Leads</h3>
              <ul class="activity-list" id="recent-leads-list">
                <li>Loading...</li>
              </ul>
            </div>
          </div>

          <!-- Leads Tab -->
          <div class="tab-content" id="tab-leads">
            <div class="page-header">
              <button class="header-sidebar-toggle" aria-label="Toggle sidebar">&#9664;</button>
              <h2>Leads Management</h2>
            </div>

            <!-- Leads Stats -->
            <div class="quick-stats">
              <div class="stat-card portal-shadow">
                <span class="stat-number" id="leads-total">-</span>
                <span class="stat-label">Total Leads</span>
              </div>
              <div class="stat-card portal-shadow">
                <span class="stat-number" id="leads-pending">-</span>
                <span class="stat-label">Pending</span>
              </div>
              <div class="stat-card portal-shadow">
                <span class="stat-number" id="leads-active">-</span>
                <span class="stat-label">In Progress</span>
              </div>
              <div class="stat-card portal-shadow">
                <span class="stat-number" id="leads-completed">-</span>
                <span class="stat-label">Completed</span>
              </div>
            </div>

            <!-- Leads Table -->
            <div class="admin-table-card">
              <div class="admin-table-header">
                <h3>Intake Submissions</h3>
                <button class="btn btn-secondary" id="refresh-leads-btn">Refresh</button>
              </div>
              <div class="leads-table-container">
                <table class="leads-table">
                  <thead>
                    <tr>
                      <th>Date</th>
                      <th>Name</th>
                      <th>Company</th>
                      <th>Email</th>
                      <th>Project Type</th>
                      <th>Budget</th>
                      <th>Status</th>
                    </tr>
                  </thead>
                  <tbody id="leads-table-body">
                    <tr>
                      <td colspan="7" class="loading-row">Loading leads...</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>

            <!-- Contact Form Submissions Table -->
            <div class="admin-table-card">
              <div class="admin-table-header">
                <h3>Contact Form Submissions</h3>
                <div class="admin-table-actions">
                  <span id="contact-new-count" class="status-badge status-new">0 new</span>
                  <button class="btn btn-secondary" id="refresh-contacts-btn">Refresh</button>
                </div>
              </div>
              <div class="contacts-table-container">
                <table class="contacts-table">
                  <thead>
                    <tr>
                      <th>Date</th>
                      <th>Name</th>
                      <th>Email</th>
                      <th>Company</th>
                      <th>Message</th>
                      <th>Status</th>
                    </tr>
                  </thead>
                  <tbody id="contacts-table-body">
                    <tr>
                      <td colspan="6" class="loading-row">Loading contact submissions...</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>

            <!-- Lead Details Panel (Hidden by default) -->
            <div class="details-panel hidden" id="lead-details-panel"></div>

            <!-- Contact Details Panel (Hidden by default) -->
            <div class="details-panel hidden" id="contact-details-panel"></div>
          </div>

          <!-- Projects Tab -->
          <div class="tab-content" id="tab-projects">
            <div class="page-header">
              <button class="header-sidebar-toggle" aria-label="Toggle sidebar">&#9664;</button>
              <h2>Projects Management</h2>
            </div>

            <!-- Projects Stats -->
            <div class="quick-stats">
              <div class="stat-card portal-shadow">
                <span class="stat-number" id="projects-total">-</span>
                <span class="stat-label">Total Projects</span>
              </div>
              <div class="stat-card portal-shadow">
                <span class="stat-number" id="projects-active">-</span>
                <span class="stat-label">Active</span>
              </div>
              <div class="stat-card portal-shadow">
                <span class="stat-number" id="projects-completed">-</span>
                <span class="stat-label">Completed</span>
              </div>
              <div class="stat-card portal-shadow">
                <span class="stat-number" id="projects-on-hold">-</span>
                <span class="stat-label">On Hold</span>
              </div>
            </div>

            <!-- Projects Table -->
            <div class="admin-table-card">
              <div class="admin-table-header">
                <h3>All Projects</h3>
                <div class="admin-table-actions">
                  <button class="btn btn-secondary" id="refresh-projects-btn">Refresh</button>
                </div>
              </div>
              <div class="projects-table-container">
                <table class="projects-table">
                  <thead>
                    <tr>
                      <th>Project Name</th>
                      <th>Client</th>
                      <th>Type</th>
                      <th>Budget</th>
                      <th>Timeline</th>
                      <th>Status</th>
                      <th>Actions</th>
                    </tr>
                  </thead>
                  <tbody id="projects-table-body">
                    <tr>
                      <td colspan="7" class="loading-row">Loading projects...</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>

          <!-- Messages Tab -->
          <div class="tab-content" id="tab-messages">
            <div class="page-header">
              <button class="header-sidebar-toggle" aria-label="Toggle sidebar">&#9664;</button>
              <h2>Client Messages</h2>
            </div>

            <!-- Client Selector -->
            <div class="client-selector-wrapper portal-shadow">
              <label for="admin-client-select" style="font-weight: 600; margin-right: 1rem"
                >Select Client:</label
              >
              <select
                id="admin-client-select"
                class="form-select"
                style="
                  min-width: 250px;
                  padding: 0.5rem 1rem;
                  border: 1px solid var(--color-border, #ddd);
                  border-radius: 4px;
                "
              >
                <option value="">-- Select a client --</option>
              </select>
            </div>

            <!-- Messages Container (like client portal) -->
            <div class="messages-container portal-shadow">
              <div class="messages-thread" id="admin-messages-thread">
                <div
                  style="
                    text-align: center;
                    color: var(--color-text-secondary, #666);
                    padding: 2rem;
                  "
                >
                  Select a client to view messages
                </div>
              </div>

              <!-- Compose Message -->
              <div class="message-compose" id="admin-compose-area" style="display: none">
                <div class="message-input-wrapper">
                  <textarea
                    id="admin-message-text"
                    class="form-textarea"
                    placeholder="Type your message..."
                  ></textarea>
                </div>
                <button class="btn btn-secondary" id="admin-send-message">Send Message</button>
              </div>
            </div>
          </div>

          <!-- Analytics Tab -->
          <div class="tab-content" id="tab-analytics">
            <div class="page-header">
              <button class="header-sidebar-toggle" aria-label="Toggle sidebar">&#9664;</button>
              <h2>Analytics</h2>
            </div>

            <div class="quick-stats">
              <div class="stat-card portal-shadow">
                <span class="stat-number" id="analytics-visitors">-</span>
                <span class="stat-label">Total Visitors</span>
              </div>
              <div class="stat-card portal-shadow">
                <span class="stat-number" id="analytics-pageviews">-</span>
                <span class="stat-label">Page Views</span>
              </div>
              <div class="stat-card portal-shadow">
                <span class="stat-number" id="analytics-sessions">-</span>
                <span class="stat-label">Avg. Session</span>
              </div>
            </div>

            <!-- Charts Section -->
            <div class="charts-grid">
              <div class="chart-container portal-shadow">
                <h3>Visitors Over Time</h3>
                <div class="chart" style="height: 300px">
                  <canvas id="visitors-chart"></canvas>
                </div>
              </div>
              <div class="chart-container portal-shadow">
                <h3>Traffic Sources</h3>
                <div class="chart" style="height: 300px">
                  <canvas id="sources-chart"></canvas>
                </div>
              </div>
            </div>

            <!-- Analytics Data Grid -->
            <div class="analytics-grid">
              <div class="analytics-section portal-shadow">
                <h3>Popular Pages</h3>
                <div class="data-list" id="popular-pages">
                  <div class="data-item"><span class="data-label">Loading...</span></div>
                </div>
              </div>
              <div class="analytics-section portal-shadow">
                <h3>Device Breakdown</h3>
                <div class="data-list" id="device-breakdown">
                  <div class="data-item"><span class="data-label">Loading...</span></div>
                </div>
              </div>
              <div class="analytics-section portal-shadow">
                <h3>Geographic Distribution</h3>
                <div class="data-list" id="geo-distribution">
                  <div class="data-item"><span class="data-label">Loading...</span></div>
                </div>
              </div>
              <div class="analytics-section portal-shadow">
                <h3>Engagement Events</h3>
                <div class="data-list" id="engagement-events">
                  <div class="data-item"><span class="data-label">Loading...</span></div>
                </div>
              </div>
            </div>

            <!-- Performance Metrics -->
            <div class="metric-group portal-shadow">
              <h3>Core Web Vitals</h3>
              <div class="vitals-grid">
                <div class="vital-card">
                  <h4>LCP</h4>
                  <div class="vital-value" id="lcp-value">-</div>
                  <span class="vital-status" id="lcp-status">-</span>
                </div>
                <div class="vital-card">
                  <h4>FID</h4>
                  <div class="vital-value" id="fid-value">-</div>
                  <span class="vital-status" id="fid-status">-</span>
                </div>
                <div class="vital-card">
                  <h4>CLS</h4>
                  <div class="vital-value" id="cls-value">-</div>
                  <span class="vital-status" id="cls-status">-</span>
                </div>
                <div class="vital-card">
                  <h4>TTFB</h4>
                  <div class="vital-value" id="ttfb-value">-</div>
                  <span class="vital-status" id="ttfb-status">-</span>
                </div>
              </div>
            </div>

            <!-- Bundle Analysis -->
            <div class="metric-group portal-shadow">
              <h3>Bundle Analysis</h3>
              <div class="bundle-info">
                <div class="bundle-item">
                  <span>Total Bundle Size</span>
                  <span id="total-bundle-size">-</span>
                </div>
                <div class="bundle-item">
                  <span>Main JS</span>
                  <span id="js-bundle-size">-</span>
                </div>
                <div class="bundle-item">
                  <span>Vendor JS</span>
                  <span id="css-bundle-size">-</span>
                </div>
                <div class="bundle-item">
                  <span>Performance Score</span>
                  <span id="performance-score">-</span>
                </div>
              </div>
            </div>

            <!-- Visitors Table -->
            <div class="visitors-dashboard">
              <div class="visitors-table-container portal-shadow">
                <table class="visitors-table">
                  <thead>
                    <tr>
                      <th>Session ID</th>
                      <th>Started</th>
                      <th>Duration</th>
                      <th>Pages</th>
                      <th>Device</th>
                      <th>Location</th>
                    </tr>
                  </thead>
                  <tbody id="visitors-table-body">
                    <tr>
                      <td colspan="6" class="loading-row">Loading visitor data...</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>

          <!-- System Tab -->
          <div class="tab-content" id="tab-system">
            <div class="page-header">
              <button class="header-sidebar-toggle" aria-label="Toggle sidebar">&#9664;</button>
              <h2>System Information</h2>
            </div>

            <!-- Module Status -->
            <div class="portal-project-card portal-shadow">
              <h3>Module Status</h3>
              <div class="status-list" id="modules-status">
                <p class="loading-text">Loading module status...</p>
              </div>
            </div>

            <!-- Service Status -->
            <div class="portal-project-card portal-shadow">
              <h3>Service Status</h3>
              <div class="status-list" id="services-status">
                <p class="loading-text">Loading service status...</p>
              </div>
            </div>

            <div class="portal-project-card portal-shadow">
              <h3>Build Information</h3>
              <div class="system-info-grid">
                <div class="system-info-row">
                  <span>Version</span>
                  <span id="sys-version">10.0.0</span>
                </div>
                <div class="system-info-row">
                  <span>Environment</span>
                  <span id="sys-environment">development</span>
                </div>
                <div class="system-info-row">
                  <span>Build Date</span>
                  <span id="sys-build-date">-</span>
                </div>
              </div>
            </div>

            <div class="portal-project-card portal-shadow">
              <h3>Browser Information</h3>
              <div class="system-info-grid">
                <div class="system-info-row">
                  <span>User Agent</span>
                  <span id="sys-useragent" class="truncate-text">-</span>
                </div>
                <div class="system-info-row">
                  <span>Screen Resolution</span>
                  <span id="sys-screen">-</span>
                </div>
                <div class="system-info-row">
                  <span>Viewport Size</span>
                  <span id="sys-viewport">-</span>
                </div>
              </div>
            </div>
          </div>

          <!-- Project Detail View (mirrors client portal view) -->
          <div class="tab-content" id="tab-project-detail">
            <div class="page-header">
              <button class="header-sidebar-toggle" aria-label="Toggle sidebar">&#9664;</button>
              <button class="btn btn-secondary btn-back" id="btn-back-to-projects">
                &#8592; Back to Projects
              </button>
              <h2 id="project-detail-title">Project Details</h2>
            </div>

            <!-- Project Overview Card -->
            <div class="project-detail-overview portal-shadow">
              <div class="project-detail-header">
                <div class="project-detail-info">
                  <h3 id="pd-project-name">Project Name</h3>
                  <p class="project-client-info">
                    <strong>Client:</strong> <span id="pd-client-name">-</span> (<span
                      id="pd-client-email"
                      >-</span
                    >)
                  </p>
                  <p><strong>Company:</strong> <span id="pd-company">-</span></p>
                </div>
                <div class="project-detail-status">
                  <span class="status-badge" id="pd-status">-</span>
                </div>
              </div>
              <div class="project-detail-meta">
                <div class="meta-item">
                  <span class="meta-label">Project Type</span>
                  <span class="meta-value" id="pd-type">-</span>
                </div>
                <div class="meta-item">
                  <span class="meta-label">Budget</span>
                  <span class="meta-value" id="pd-budget">-</span>
                </div>
                <div class="meta-item">
                  <span class="meta-label">Timeline</span>
                  <span class="meta-value" id="pd-timeline">-</span>
                </div>
                <div class="meta-item">
                  <span class="meta-label">Started</span>
                  <span class="meta-value" id="pd-start-date">-</span>
                </div>
              </div>
            </div>

            <!-- Project Detail Tabs -->
            <div class="project-detail-tabs">
              <button class="pd-tab-btn active" data-pd-tab="overview">Overview</button>
              <button class="pd-tab-btn" data-pd-tab="files">Files</button>
              <button class="pd-tab-btn" data-pd-tab="messages">Messages</button>
              <button class="pd-tab-btn" data-pd-tab="invoices">Invoices</button>
              <button class="pd-tab-btn" data-pd-tab="settings">Settings</button>
            </div>

            <!-- Overview Sub-Tab -->
            <div class="pd-tab-content active" id="pd-tab-overview">
              <!-- Progress Section -->
              <div class="portal-project-card portal-shadow">
                <h3>Project Progress</h3>
                <div class="project-progress-display">
                  <div class="progress-percentage" id="pd-progress-percent">0%</div>
                  <div class="progress-bar">
                    <div class="progress-fill" id="pd-progress-bar" style="width: 0%"></div>
                  </div>
                </div>
              </div>

              <!-- Milestones Section -->
              <div class="portal-project-card portal-shadow">
                <div class="card-header-with-action">
                  <h3>Milestones</h3>
                  <button class="btn btn-secondary btn-sm" id="btn-add-milestone">
                    + Add Milestone
                  </button>
                </div>
                <div class="milestones-list" id="pd-milestones-list">
                  <p class="empty-state">
                    No milestones yet. Add milestones to track project progress.
                  </p>
                </div>
              </div>

              <!-- Project Description / Notes -->
              <div class="portal-project-card portal-shadow">
                <div class="card-header-with-action">
                  <h3>Project Notes</h3>
                  <button class="btn btn-secondary btn-sm" id="btn-edit-notes">Edit</button>
                </div>
                <div class="project-notes" id="pd-notes">
                  <p class="empty-state">No project notes yet.</p>
                </div>
              </div>

              <!-- Recent Activity -->
              <div class="recent-activity portal-shadow">
                <h3>Recent Activity</h3>
                <ul class="activity-list" id="pd-activity-list">
                  <li>No activity recorded yet.</li>
                </ul>
              </div>
            </div>

            <!-- Files Sub-Tab -->
            <div class="pd-tab-content" id="pd-tab-files">
              <!-- Upload Section -->
              <div class="files-upload-section portal-shadow">
                <h3>Upload Files for Client</h3>
                <div class="upload-dropzone" id="pd-upload-dropzone">
                  <p>Drag and drop files here or</p>
                  <button class="btn btn-secondary" id="btn-pd-browse-files">Browse Files</button>
                  <input type="file" id="pd-file-input" multiple hidden />
                </div>
              </div>

              <!-- Files List -->
              <div class="files-list-section portal-shadow">
                <h3>Project Files</h3>
                <div class="files-list" id="pd-files-list">
                  <p class="empty-state">No files uploaded yet.</p>
                </div>
              </div>
            </div>

            <!-- Messages Sub-Tab -->
            <div class="pd-tab-content" id="pd-tab-messages">
              <div class="messages-container portal-shadow">
                <div class="messages-thread" id="pd-messages-thread">
                  <p class="empty-state">
                    No messages yet. Start the conversation with your client.
                  </p>
                </div>

                <div class="message-compose">
                  <div class="message-input-wrapper">
                    <textarea
                      id="pd-message-input"
                      class="form-textarea"
                      placeholder="Type your message to the client..."
                    ></textarea>
                  </div>
                  <button class="btn btn-secondary" id="btn-pd-send-message">Send Message</button>
                </div>
              </div>
            </div>

            <!-- Invoices Sub-Tab -->
            <div class="pd-tab-content" id="pd-tab-invoices">
              <!-- Invoice Summary -->
              <div class="invoice-summary">
                <div class="summary-card portal-shadow">
                  <span class="summary-label">Total Outstanding</span>
                  <span class="summary-value" id="pd-outstanding">$0.00</span>
                </div>
                <div class="summary-card portal-shadow">
                  <span class="summary-label">Total Paid</span>
                  <span class="summary-value" id="pd-paid">$0.00</span>
                </div>
              </div>

              <!-- Create Invoice Button -->
              <div class="portal-project-card portal-shadow">
                <div class="card-header-with-action">
                  <h3>Invoices</h3>
                  <button class="btn btn-secondary" id="btn-create-invoice">
                    + Create Invoice
                  </button>
                </div>
                <div class="invoices-list" id="pd-invoices-list">
                  <p class="empty-state">No invoices created yet.</p>
                </div>
              </div>
            </div>

            <!-- Settings Sub-Tab -->
            <div class="pd-tab-content" id="pd-tab-settings">
              <div class="settings-grid">
                <!-- Project Settings -->
                <div class="settings-section portal-shadow">
                  <h3>Project Settings</h3>
                  <form class="settings-form" id="pd-project-settings-form">
                    <div class="form-group">
                      <label for="pd-setting-name">Project Name</label>
                      <input type="text" id="pd-setting-name" class="form-input" />
                    </div>
                    <div class="form-group">
                      <label for="pd-setting-status">Status</label>
                      <select id="pd-setting-status" class="form-select">
                        <option value="pending">Pending</option>
                        <option value="active">Active</option>
                        <option value="on_hold">On Hold</option>
                        <option value="completed">Completed</option>
                        <option value="cancelled">Cancelled</option>
                      </select>
                    </div>
                    <div class="form-group">
                      <label for="pd-setting-progress">Progress (%)</label>
                      <input
                        type="number"
                        id="pd-setting-progress"
                        class="form-input"
                        min="0"
                        max="100"
                      />
                    </div>
                    <button type="submit" class="btn btn-secondary">Save Changes</button>
                  </form>
                </div>

                <!-- Client Account -->
                <div class="settings-section portal-shadow">
                  <h3>Client Account</h3>
                  <div class="client-account-info">
                    <p><strong>Email:</strong> <span id="pd-client-account-email">-</span></p>
                    <p>
                      <strong>Account Status:</strong>
                      <span id="pd-client-account-status" class="status-badge">-</span>
                    </p>
                    <p><strong>Last Login:</strong> <span id="pd-client-last-login">Never</span></p>
                  </div>
                  <div class="client-account-actions">
                    <button class="btn btn-secondary btn-sm" id="btn-resend-invite">
                      Resend Invitation
                    </button>
                    <button class="btn btn-secondary btn-sm" id="btn-reset-password">
                      Reset Password
                    </button>
                  </div>
                </div>

                <!-- Preview URL -->
                <div class="settings-section portal-shadow">
                  <h3>Preview URL</h3>
                  <form class="settings-form" id="pd-preview-form">
                    <div class="form-group">
                      <label for="pd-preview-url">Client Preview URL</label>
                      <input
                        type="url"
                        id="pd-preview-url"
                        class="form-input"
                        placeholder="https://preview.example.com"
                      />
                    </div>
                    <button type="submit" class="btn btn-secondary">Save Preview URL</button>
                  </form>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Detail Modal for Leads/Contacts -->
    <div class="admin-modal-overlay" id="detail-modal" style="display: none">
      <div class="admin-modal">
        <div class="admin-modal-header">
          <h3 id="modal-title">Details</h3>
          <button class="admin-modal-close" id="modal-close-btn" aria-label="Close modal">
            &times;
          </button>
        </div>
        <div class="admin-modal-body" id="modal-body">
          <!-- Dynamic content will be inserted here -->
        </div>
        <div class="admin-modal-footer">
          <button class="btn btn-secondary" id="modal-close-btn-footer">Close</button>
        </div>
      </div>
    </div>
  </body>
</html>
