import{B as m}from"./chunk-DFiJEDgY.js";import{g as r}from"./chunk-DjKJqAo0.js";import{A as o}from"./chunk-CkQA30Fn.js";function h(d){return{low:"ðŸ”µ",medium:"ðŸŸ¡",high:"ðŸŸ ",urgent:"ðŸ”´"}[d]||"âšª"}class f extends m{constructor(){super("client-portal"),this.isLoggedIn=!1,this.currentProject=null,this.currentUser=null,this.config={loginSectionId:"login-section",dashboardSectionId:"dashboard-section",loginFormId:"login-form",projectsListId:"projects-list",projectDetailsId:"project-details"},this.loginSection=null,this.dashboardSection=null,this.loginForm=null,this.projectsList=null,this.projectDetails=null}async onInit(){this.cacheElements(),this.setupEventListeners(),this.setupAnimations()}onDestroy(){this.loginForm&&this.loginForm.removeEventListener("submit",this.handleLogin)}cacheElements(){this.loginSection=this.getElement("Login section",`#${this.config.loginSectionId}`,!1),this.dashboardSection=this.getElement("Dashboard section",`#${this.config.dashboardSectionId}`,!1),this.loginForm=this.getElement("Login form",`#${this.config.loginFormId}`,!1),this.projectsList=this.getElement("Projects list",`#${this.config.projectsListId}`,!1),this.projectDetails=this.getElement("Project details",`#${this.config.projectDetailsId}`,!1)}setupEventListeners(){this.loginForm&&this.loginForm.addEventListener("submit",this.handleLogin.bind(this));const e=document.getElementById("logout-btn");e&&e.addEventListener("click",this.logout.bind(this));const t=document.getElementById("message-form");t&&t.addEventListener("submit",this.sendMessage.bind(this))}setupAnimations(){this.setupButtonAnimations()}setupButtonAnimations(){document.querySelectorAll(".client-buttons .btn").forEach(t=>{this.animateButton(t)})}animateButton(e){const t=e.textContent?.trim()||"";e.innerHTML=`<span style="position: relative; z-index: 2;">${t}</span>`;const s=document.createElement("div");s.className="button-fill",s.style.cssText=`
      position: absolute;
      top: 0;
      left: 0;
      width: 0%;
      height: 100%;
      background-color: #00ff41;
      z-index: 0;
      pointer-events: none;
      border-radius: inherit;
      transform-origin: left center;
    `,e.appendChild(s),e.addEventListener("mouseenter",i=>{const a=e.getBoundingClientRect(),l=i.clientX,c=a.left+a.width/2,n=l<c;r.set(s,{left:n?"0":"auto",right:n?"auto":"0",transformOrigin:n?"left center":"right center"}),r.to(s,{width:"100%",duration:o.TIMERS.ANIMATION_DURATION/1e3,ease:o.EASING.SMOOTH}),r.to(e,{color:o.THEME.DARK,duration:o.TIMERS.ANIMATION_DURATION/1e3,ease:o.EASING.SMOOTH})}),e.addEventListener("mouseleave",i=>{const a=e.getBoundingClientRect(),l=i.clientX,c=a.left+a.width/2,n=l<c;r.set(s,{left:n?"0":"auto",right:n?"auto":"0",transformOrigin:n?"left center":"right center"}),r.to(s,{width:"0%",duration:o.TIMERS.ANIMATION_DURATION/1e3,ease:o.EASING.SMOOTH}),r.to(e,{color:"inherit",duration:o.TIMERS.ANIMATION_DURATION/1e3,ease:o.EASING.SMOOTH})})}async handleLogin(e){if(e.preventDefault(),!this.loginForm)return;const t=new FormData(this.loginForm),s={email:t.get("email"),password:t.get("password")};if(!s.email.trim()){this.showFieldError("client-email","Email address is required");return}if(!s.password.trim()){this.showFieldError("client-password","Password is required");return}this.setLoginLoading(!0);try{if(await new Promise(i=>setTimeout(i,o.API.TIMEOUT/10)),s.email==="demo@example.com"&&s.password==="password123")this.isLoggedIn=!0,this.currentUser=s.email,await this.loadUserProjects(s.email),this.showDashboard();else throw new Error("Invalid email or password")}catch(i){this.showLoginError(i instanceof Error?i.message:"Login failed")}finally{this.setLoginLoading(!1)}}async loadUserProjects(e){const t={id:"project-intake-001",projectName:"E-commerce Website Development",clientId:e,clientName:"John Smith",status:"pending",priority:"medium",progress:15,startDate:"2025-01-15",estimatedEndDate:"2025-04-15",updates:[{id:"update-001",date:"2025-01-01",title:"Project Intake Received",description:"Initial project intake form submitted and under review.",author:"No Bhad Codes Team",type:"general"}],files:[],messages:[{id:"msg-001",sender:"No Bhad Codes Team",senderRole:"system",message:"Thank you for submitting your project intake form.",timestamp:"2025-01-01T10:00:00Z",isRead:!1}],milestones:[{id:"milestone-001",title:"Initial Consultation",description:"Review requirements and schedule kickoff meeting",dueDate:"2025-01-10",isCompleted:!1,deliverables:["Requirements review","Project timeline","Initial proposal"]}]};this.populateProjectsList([t])}populateProjectsList(e){if(this.projectsList){if(e.length===0){this.projectsList.innerHTML='<div class="no-projects"><p>No projects found.</p></div>';return}this.projectsList.innerHTML="",e.forEach(t=>{const s=document.createElement("div");s.className="project-item",s.dataset.projectId=t.id,s.innerHTML=`
        <div class="project-item-header">
          <h3 class="project-item-title">${t.projectName}</h3>
          <span class="project-item-status status-${t.status}">${t.status.replace("-"," ")}</span>
        </div>
        <div class="project-item-progress">
          <div class="project-item-progress-bar">
            <div class="project-item-progress-fill" style="width: ${t.progress}%"></div>
          </div>
          <span class="project-item-progress-text">${t.progress}%</span>
        </div>
      `,s.addEventListener("click",()=>{this.selectProject(t),document.querySelectorAll(".project-item").forEach(i=>i.classList.remove("active")),s.classList.add("active")}),this.projectsList?.appendChild(s)})}}selectProject(e){this.currentProject=e,this.populateProjectDetails();const t=document.getElementById("welcome-view"),s=document.getElementById("project-detail-view");t&&(t.style.display="none"),s&&(s.style.display="block")}populateProjectDetails(){if(!this.currentProject)return;const e=document.getElementById("project-title");e&&(e.textContent=this.currentProject.projectName);const t=document.getElementById("project-status");t&&(t.textContent=this.currentProject.status.replace("-"," "),t.className=`status-badge status-${this.currentProject.status}`);const s=document.getElementById("progress-fill"),i=document.getElementById("progress-text");s&&i&&(s.style.width=`${this.currentProject.progress}%`,i.textContent=`${this.currentProject.progress}%`);const a=document.getElementById("start-date");a&&(a.textContent=this.formatDate(this.currentProject.startDate));const l=document.getElementById("end-date");l&&this.currentProject.estimatedEndDate&&(l.textContent=this.formatDate(this.currentProject.estimatedEndDate));const c=document.getElementById("project-priority");if(c){const n=h(this.currentProject.priority);c.innerHTML=`${n} ${this.currentProject.priority}`}this.loadUpdates(),this.loadFiles(),this.loadMessages()}loadUpdates(){if(!this.currentProject)return;const e=document.getElementById("updates-timeline");e&&(e.innerHTML="",this.currentProject.updates.forEach(t=>{const s=document.createElement("div");s.className="timeline-item",s.innerHTML=`
        <div class="timeline-marker ${t.type}"></div>
        <div class="timeline-content">
          <div class="timeline-header">
            <h4>${t.title}</h4>
            <span class="timeline-date">${this.formatDate(t.date)}</span>
          </div>
          <p>${t.description}</p>
          <div class="timeline-author">by ${t.author}</div>
        </div>
      `,e.appendChild(s)}))}loadFiles(){if(!this.currentProject)return;const e=document.getElementById("project-files");if(e){if(this.currentProject.files.length===0){e.innerHTML='<p class="no-files">No files available yet.</p>';return}e.innerHTML=""}}loadMessages(){if(!this.currentProject)return;const e=document.getElementById("messages-container");e&&(e.innerHTML="",this.currentProject.messages.forEach(t=>{const s=document.createElement("div");s.className=`message message-${t.senderRole}`,s.innerHTML=`
        <div class="message-header">
          <span class="message-sender">${t.sender}</span>
          <span class="message-time">${this.formatDate(t.timestamp)}</span>
        </div>
        <div class="message-content">${t.message}</div>
      `,e.appendChild(s)}))}showDashboard(){!this.loginSection||!this.dashboardSection||r.to(this.loginSection,{opacity:0,y:-20,duration:o.TIMERS.PAGE_TRANSITION/1e3,onComplete:()=>{this.loginSection&&(this.loginSection.style.display="none"),this.dashboardSection&&(this.dashboardSection.style.display="block",this.animateDashboard())}})}animateDashboard(){r.fromTo(this.dashboardSection,{opacity:0,y:20},{opacity:1,y:0,duration:o.TIMERS.PAGE_TRANSITION/1e3,ease:o.EASING.SMOOTH})}logout(){this.isLoggedIn=!1,this.currentProject=null,this.currentUser=null,this.dashboardSection&&(this.dashboardSection.style.display="none"),this.loginSection&&(this.loginSection.style.display="block",r.fromTo(this.loginSection,{opacity:0,y:20},{opacity:1,y:0,duration:o.TIMERS.ANIMATION_DURATION/1e3}))}async sendMessage(e){e.preventDefault()}showFieldError(e,t){const s=document.getElementById(e),i=document.getElementById(`${e.replace("client-","")}-error`);s&&s.classList.add("error"),i&&(i.textContent=t,i.style.display="block")}showLoginError(e){const t=document.getElementById("login-error");t&&(t.textContent=e,t.style.display="block")}setLoginLoading(e){const t=document.getElementById("login-btn"),s=document.querySelector(".btn-loader");t&&(t.disabled=e,e?t.classList.add("loading"):t.classList.remove("loading")),s&&(s.style.display=e?"block":"none")}formatDate(e){return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}clearErrors(){document.querySelectorAll(".error").forEach(e=>e.classList.remove("error")),document.querySelectorAll(".error-message").forEach(e=>{e.style.display="none"})}}export{f as ClientPortalModule};
