const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/chunk-DL-eEZZ1.js","js/chunk-BPFXoLhD.js","js/chunk-DFiJEDgY.js","js/theme-rguDetHn.js","js/index-DIemqqyN.js","js/chunk-C20AiJlz.js","js/intro-animation-C0oXOp6v.js","js/chunk-DjKJqAo0.js","js/chunk-Dv35Mxnd.js","js/navigation-BX9h_yRr.js","js/chunk-DYKrrkk1.js","js/footer-DkoLquW0.js","js/client-landing-DDVDjLkI.js","js/chunk-CkQA30Fn.js","js/client-portal-14qebvb1.js","js/admin-dashboard-BFDG_Zwq.js"])))=>i.map(i=>d[i]);
import{ComponentRegistry as g,componentStore as f}from"./index-DIemqqyN.js";const E="modulepreload",T=function(r){return"/"+r},p={},c=function(t,e,n){let i=Promise.resolve();if(e&&e.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),d=a?.nonce||a?.getAttribute("nonce");i=Promise.allSettled(e.map(u=>{if(u=T(u),u in p)return;p[u]=!0;const y=u.endsWith(".css"),S=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${S}`))return;const h=document.createElement("link");if(h.rel=y?"stylesheet":E,y||(h.as="script"),h.crossOrigin="",h.href=u,d&&h.setAttribute("nonce",d),document.head.appendChild(h),y)return new Promise((_,C)=>{h.addEventListener("load",_),h.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(a){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=a,window.dispatchEvent(d),!d.defaultPrevented)throw a}return i.then(a=>{for(const d of a||[])d.status==="rejected"&&s(d.reason);return t().catch(s)})};class v{constructor(){this.services=new Map,this.resolving=new Set}register(t,e,n={}){this.services.set(t,{factory:e,singleton:n.singleton??!0,dependencies:n.dependencies??[]})}singleton(t,e,n=[]){this.register(t,e,{singleton:!0,dependencies:n})}transient(t,e,n=[]){this.register(t,e,{singleton:!1,dependencies:n})}async resolve(t){const e=this.services.get(t);if(!e)throw new Error(`Service '${t}' not registered`);if(this.resolving.has(t))throw new Error(`Circular dependency detected for service '${t}'`);if(e.singleton&&e.instance)return e.instance;this.resolving.add(t);try{const n=await Promise.all((e.dependencies||[]).map(s=>this.resolve(s))),i=await e.factory(...n);return e.singleton&&(e.instance=i),this.resolving.delete(t),i}catch(n){throw this.resolving.delete(t),n}}has(t){return this.services.has(t)}getRegisteredServices(){return Array.from(this.services.keys())}clear(){this.services.clear(),this.resolving.clear()}}const o=new v,L=Object.freeze(Object.defineProperty({__proto__:null,Container:v,container:o},Symbol.toStringTag,{value:"Module"}));class A{constructor(t){this.listeners=new Map,this.selectors=new Map,this.computed=new Map,this.reducers=new Map,this.middleware=[],this.history=[],this.maxHistorySize=50,this.isTimeTravel=!1,this.state={...t}}getState(){return{...this.state}}setState(t){const e={...this.state};this.state={...this.state,...t},this.isTimeTravel||this.addToHistory(this.state),this.notifyListeners(this.state,e),this.notifySelectors(),this.notifyComputed(e)}dispatch(t){const e={...t,meta:{timestamp:Date.now(),source:"dispatch",...t.meta}};this.middleware.reduceRight((i,s)=>s(this)(i),i=>{const s=this.reducers.get(i.type);if(s){const a=s(this.state,i);this.setState(a)}})(e)}addReducer(t,e){this.reducers.set(t,e)}addMiddleware(t){this.middleware.push(t)}subscribe(t){Math.random().toString(36);const e=this.listeners.get("global")||[];return e.push(t),this.listeners.set("global",e),()=>{const n=this.listeners.get("global")||[],i=n.indexOf(t);i>-1&&n.splice(i,1)}}subscribeToProperty(t,e){const n=this.listeners.get(t)||[],i=(s,a)=>{s[t]!==a[t]&&e(s[t],a[t])};return n.push(i),this.listeners.set(t,n),()=>{const s=this.listeners.get(t)||[],a=s.indexOf(i);a>-1&&s.splice(a,1)}}createSelector(t,e){const n=Math.random().toString(36),i=t(this.state);return this.selectors.set(n,{selector:t,lastValue:i,listeners:[e]}),e(i),()=>{this.selectors.delete(n)}}createComputed(t,e,n,i){const s=e(this.state),a={selector:e,dependencies:n,lastValue:s,listeners:i?[i]:[]};return this.computed.set(t,a),i&&i(s),()=>{this.computed.delete(t)}}getComputed(t){const e=this.computed.get(t);if(e)return e.selector(this.state)}notifyListeners(t,e){(this.listeners.get("global")||[]).forEach(i=>i(t,e)),Object.keys(t).forEach(i=>{t[i]!==e[i]&&(this.listeners.get(i)||[]).forEach(a=>a(t,e))})}notifySelectors(){this.selectors.forEach((t,e)=>{const n=t.selector(this.state);n!==t.lastValue&&(t.lastValue=n,t.listeners.forEach(i=>i(n)))})}notifyComputed(t){this.computed.forEach((e,n)=>{if(e.dependencies.some(s=>this.state[s]!==t[s])){const s=e.selector(this.state);s!==e.lastValue&&(e.lastValue=s,e.listeners.forEach(a=>a(s)))}})}addToHistory(t,e){const n={state:{...t},timestamp:Date.now()};e!==void 0&&(n.action=e),this.history.push(n),this.history.length>this.maxHistorySize&&this.history.shift()}reset(t){const e={...this.state};this.state={...t||{},...this.state},this.notifyListeners(this.state,e),this.notifySelectors()}undo(){if(this.history.length<2)return!1;this.history.pop();const t=this.history[this.history.length-1];return this.isTimeTravel=!0,this.state={...t.state},this.notifyListeners(this.state,this.state),this.notifySelectors(),this.notifyComputed(this.state),this.isTimeTravel=!1,!0}getHistory(){return[...this.history]}clearHistory(){this.history=[{state:{...this.state},timestamp:Date.now()}]}getDebugInfo(){return{state:this.state,listenerCount:Array.from(this.listeners.values()).reduce((t,e)=>t+e.length,0),selectorCount:this.selectors.size,computedCount:this.computed.size,reducerCount:this.reducers.size,middlewareCount:this.middleware.length,historySize:this.history.length,reducers:Array.from(this.reducers.keys()),computed:Array.from(this.computed.keys())}}batch(t){const e=this.notifyListeners.bind(this),n=this.notifySelectors.bind(this),i=this.notifyComputed.bind(this);let s=null;this.notifyListeners=(a,d)=>{s||(s=d)},this.notifySelectors=()=>{},this.notifyComputed=()=>{};try{t()}finally{this.notifyListeners=e,this.notifySelectors=n,this.notifyComputed=i,s&&(this.notifyListeners(this.state,s),this.notifySelectors(),this.notifyComputed(s))}}}const w=()=>{const r=navigator.connection;return r?.effectiveType?r.effectiveType:"unknown"},b={theme:localStorage.getItem("theme")||"light",navOpen:!1,currentSection:null,introComplete:!1,introAnimating:!1,currentChannel:1,channelsLoaded:!1,worksData:null,contactFormVisible:!1,contactFormSubmitting:!1,reducedMotion:window.matchMedia("(prefers-reduced-motion: reduce)").matches,devicePixelRatio:window.devicePixelRatio||1,online:navigator.onLine,connectionType:w(),lastError:null,errorCount:0},l=new A(b),M=r=>t=>e=>{console.group(`ðŸ”„ Action: ${e.type}`),console.log("Payload:",e.payload),console.log("Previous State:",r.getState()),t(e),console.log("Next State:",r.getState()),console.groupEnd()},R=r=>t=>e=>{try{t(e)}catch(n){console.error("State update error:",n),r.setState({lastError:n instanceof Error?n.message:"Unknown error",errorCount:r.getState().errorCount+1})}};l.addMiddleware(M);l.addMiddleware(R);l.addReducer("SET_THEME",(r,t)=>({theme:t.payload}));l.addReducer("TOGGLE_NAV",r=>({navOpen:!r.navOpen}));l.addReducer("SET_CURRENT_SECTION",(r,t)=>({currentSection:t.payload}));l.addReducer("COMPLETE_INTRO",r=>({introComplete:!0,introAnimating:!1}));l.addReducer("SET_CONTACT_FORM_VISIBLE",(r,t)=>({contactFormVisible:t.payload}));l.addReducer("CLEAR_ERROR",r=>({lastError:null}));l.createComputed("isReducedExperience",r=>r.reducedMotion||r.connectionType==="slow-2g"||r.connectionType==="2g",["reducedMotion","connectionType"]);l.createComputed("canShowAnimations",r=>!r.reducedMotion&&r.online,["reducedMotion","online"]);window.addEventListener("online",()=>{l.dispatch({type:"NETWORK_STATUS_CHANGED",payload:{online:!0}})});window.addEventListener("offline",()=>{l.dispatch({type:"NETWORK_STATUS_CHANGED",payload:{online:!1}})});"connection"in navigator&&navigator.connection.addEventListener("change",()=>{l.dispatch({type:"CONNECTION_TYPE_CHANGED",payload:{connectionType:w()}})});l.addReducer("NETWORK_STATUS_CHANGED",(r,t)=>({online:t.payload.online}));l.addReducer("CONNECTION_TYPE_CHANGED",(r,t)=>({connectionType:t.payload.connectionType}));class I{constructor(){this.modules=new Map,this.services=new Map,this.isInitialized=!1,this.debug=!1,this.setupServices(),this.setupModules()}setupServices(){o.singleton("ComponentStore",async()=>f),o.singleton("ComponentRegistry",async()=>g),o.register("RouterService",async()=>{const{RouterService:t}=await c(async()=>{const{RouterService:e}=await import("./chunk-DL-eEZZ1.js").then(n=>n.r);return{RouterService:e}},__vite__mapDeps([0,1,2]));return new t({defaultRoute:"/",smoothScrolling:!0,scrollOffset:80,transitionDuration:600})},{singleton:!0}),o.register("DataService",async()=>{const{DataService:t}=await c(async()=>{const{DataService:e}=await import("./chunk-DL-eEZZ1.js").then(n=>n.d);return{DataService:e}},__vite__mapDeps([0,1,2]));return new t},{singleton:!0}),o.register("ContactService",async()=>{const{ContactService:t}=await c(async()=>{const{ContactService:e}=await import("./chunk-DL-eEZZ1.js").then(n=>n.c);return{ContactService:e}},__vite__mapDeps([0,1,2]));return new t({backend:"netlify"})},{singleton:!0}),o.register("PerformanceService",async()=>{const{PerformanceService:t}=await c(async()=>{const{PerformanceService:e}=await import("./chunk-CkQA30Fn.js").then(n=>n.p);return{PerformanceService:e}},[]);return new t({lcp:2500,fid:100,cls:.1,bundleSize:600*1024,ttfb:200})},{singleton:!0}),o.register("BundleAnalyzerService",async()=>{const{BundleAnalyzerService:t}=await c(async()=>{const{BundleAnalyzerService:e}=await import("./chunk-DL-eEZZ1.js").then(n=>n.b);return{BundleAnalyzerService:e}},__vite__mapDeps([0,1,2]));return new t},{singleton:!0}),o.register("VisitorTrackingService",async()=>{const{VisitorTrackingService:t}=await c(async()=>{const{VisitorTrackingService:e}=await import("./chunk-CkQA30Fn.js").then(n=>n.v);return{VisitorTrackingService:e}},[]);return new t({enableTracking:!0,respectDoNotTrack:!0,cookieConsent:!0,sessionTimeout:30,trackScrollDepth:!0,trackClicks:!0,trackBusinessCardInteractions:!0,trackFormSubmissions:!0,trackDownloads:!0,trackExternalLinks:!0,batchSize:10,flushInterval:30})},{singleton:!0}),o.register("CodeProtectionService",async()=>{const{CodeProtectionService:t}=await c(async()=>{const{CodeProtectionService:n}=await import("./chunk-DL-eEZZ1.js").then(i=>i.a);return{CodeProtectionService:n}},__vite__mapDeps([0,1,2])),{getProtectionConfig:e}=await c(async()=>{const{getProtectionConfig:n}=await import("./protection-CKTY0mBz.js");return{getProtectionConfig:n}},[]);return new t(e())},{singleton:!0})}setupModules(){[{name:"ThemeModule",type:"dom",factory:async()=>{const{ThemeModule:e}=await c(async()=>{const{ThemeModule:n}=await import("./theme-rguDetHn.js");return{ThemeModule:n}},__vite__mapDeps([3,2,4,5]));return new e({debug:this.debug})}},{name:"IntroAnimationModule",type:"dom",factory:async()=>{const e=window.location.pathname;if(e==="/"||e==="/index.html"){const{IntroAnimationModule:n}=await c(async()=>{const{IntroAnimationModule:i}=await import("./intro-animation-C0oXOp6v.js");return{IntroAnimationModule:i}},__vite__mapDeps([6,2,7]));return new n}return{init:async()=>{},destroy:()=>{},isInitialized:!0,name:"IntroAnimationModule"}}},{name:"SectionCardRenderer",type:"dom",factory:async()=>{const{BusinessCardRenderer:e}=await c(async()=>{const{BusinessCardRenderer:n}=await import("./chunk-Dv35Mxnd.js").then(i=>i.b);return{BusinessCardRenderer:n}},__vite__mapDeps([8,2,7]));return new e({businessCardId:"business-card",businessCardInnerId:"business-card-inner",frontSelector:"#business-card .business-card-front",backSelector:"#business-card .business-card-back",containerSelector:".business-card-container"})}},{name:"SectionCardInteractions",type:"dom",factory:async()=>{const{BusinessCardInteractions:e}=await c(async()=>{const{BusinessCardInteractions:i}=await import("./chunk-Dv35Mxnd.js").then(s=>s.a);return{BusinessCardInteractions:i}},__vite__mapDeps([8,2,7])),n=await o.resolve("SectionCardRenderer");return new e(n)},dependencies:["SectionCardRenderer"]},{name:"NavigationModule",type:"dom",factory:async()=>{const{NavigationModule:e}=await c(async()=>{const{NavigationModule:s}=await import("./navigation-BX9h_yRr.js");return{NavigationModule:s}},__vite__mapDeps([9,2,10,7,4,5])),n=await o.resolve("RouterService"),i=await o.resolve("DataService");return new e({debug:this.debug,routerService:n,dataService:i})},dependencies:["RouterService","DataService"]},{name:"ContactFormModule",type:"dom",factory:async()=>{const{ContactFormModule:e}=await c(async()=>{const{ContactFormModule:n}=await import("./chunk-BPFXoLhD.js").then(i=>i.c);return{ContactFormModule:n}},__vite__mapDeps([1,2,0]));return await o.resolve("ContactService"),new e({backend:"netlify"})},dependencies:["ContactService"]},{name:"FooterModule",type:"dom",factory:async()=>{const{FooterModule:e}=await c(async()=>{const{FooterModule:n}=await import("./footer-DkoLquW0.js");return{FooterModule:n}},__vite__mapDeps([11,2]));return new e}},{name:"ClientLandingModule",type:"dom",factory:async()=>{if(window.location.pathname.includes("/client/landing")){const{ClientLandingModule:n}=await c(async()=>{const{ClientLandingModule:i}=await import("./client-landing-DDVDjLkI.js");return{ClientLandingModule:i}},__vite__mapDeps([12,2,7,13]));return new n}return{init:async()=>{},destroy:()=>{},isInitialized:!0,name:"ClientLandingModule"}}},{name:"ClientPortalModule",type:"dom",factory:async()=>{const e=window.location.pathname;if(e.includes("/client")&&e.includes("/portal")){const{ClientPortalModule:n}=await c(async()=>{const{ClientPortalModule:i}=await import("./client-portal-14qebvb1.js");return{ClientPortalModule:i}},__vite__mapDeps([14,2,7,13]));return new n}return{init:async()=>{},destroy:()=>{},isInitialized:!0,name:"ClientPortalModule"}}},{name:"AdminDashboardModule",type:"dom",factory:async()=>{if(window.location.pathname.includes("/admin")){const{AdminDashboard:n}=await c(async()=>{const{AdminDashboard:i}=await import("./admin-dashboard-BFDG_Zwq.js");return{AdminDashboard:i}},__vite__mapDeps([15,4,2,5]));return new n,{init:async()=>{},destroy:()=>{},isInitialized:!0,name:"AdminDashboardModule"}}return{init:async()=>{},destroy:()=>{},isInitialized:!0,name:"AdminDashboardModule"}}}].forEach(e=>{o.register(e.name,e.factory,{singleton:!0,dependencies:e.dependencies||[]})})}async init(){if(this.isInitialized){console.warn("[Application] Already initialized");return}console.log("[Application] Starting initialization...");try{if(await this.initializeServices(),await this.initializeModules(),await g.autoInit(),typeof window<"u"){const{createConsentBanner:t,ConsentBanner:e}=await c(async()=>{const{createConsentBanner:n,ConsentBanner:i}=await import("./index-DIemqqyN.js");return{createConsentBanner:n,ConsentBanner:i}},__vite__mapDeps([4,2,5]));if(e.hasExistingConsent())e.getConsentStatus()==="accepted"&&await(await o.resolve("VisitorTrackingService")).init();else{const n=await t({position:"bottom",theme:"light",showDetailsLink:!0,autoHide:!1,companyName:"No Bhad Codes",onAccept:async()=>{await(await o.resolve("VisitorTrackingService")).init()},onDecline:()=>{console.log("[Application] Visitor tracking declined")}},document.body)}}this.isInitialized=!0,console.log("[Application] Initialization complete"),l.setState({introAnimating:!0}),setTimeout(()=>{const t=this.getModule("SectionCardRenderer");t&&t.enableAfterIntro(),this.setupStickyFooter()},3e3)}catch(t){throw console.error("[Application] Initialization failed:",t),t}}async initializeServices(){const t=["VisitorTrackingService","PerformanceService","BundleAnalyzerService","RouterService","DataService","ContactService","CodeProtectionService"];for(const e of t)try{console.log(`[Application] Initializing ${e}...`);const n=await o.resolve(e);await n.init(),this.services.set(e,n),console.log(`[Application] ${e} initialized`)}catch(n){console.error(`[Application] Failed to initialize ${e}:`,n)}}async initializeModules(){const e=[...["ThemeModule","SectionCardRenderer","SectionCardInteractions","NavigationModule","ContactFormModule","ClientLandingModule","ClientPortalModule","AdminDashboardModule"]],n=window.location.pathname;(n==="/"||n==="/index.html")&&e.splice(1,0,"IntroAnimationModule");for(const i of e)try{console.log(`[Application] Initializing ${i}...`);const s=await o.resolve(i);await s.init(),this.modules.set(i,s),console.log(`[Application] ${i} initialized`)}catch(s){console.error(`[Application] Failed to initialize ${i}:`,s)}}getModule(t){return this.modules.get(t)}getService(t){return this.services.get(t)}async hotReload(){console.log("[Application] Hot reloading...");for(const[t,e]of this.modules)e.destroy&&await e.destroy();this.modules.clear(),this.services.clear(),o.clear(),this.isInitialized=!1,this.setupServices(),this.setupModules(),await this.init()}setupStickyFooter(){const t=document.querySelector(".footer");if(!t)return;const e=()=>{const n=window.pageYOffset||document.documentElement.scrollTop,i=window.innerHeight,s=document.documentElement.scrollHeight;n+i>=s-10?t.classList.add("at-bottom"):t.classList.remove("at-bottom")};window.addEventListener("scroll",e,{passive:!0}),e()}getStatus(){return{initialized:this.isInitialized,moduleCount:this.modules.size,serviceCount:this.services.size,state:l.getState(),modules:Object.fromEntries(Array.from(this.modules.entries()).map(([t,e])=>[t,e.getStatus?e.getStatus():{loaded:!0}])),services:Object.fromEntries(Array.from(this.services.entries()).map(([t,e])=>[t,e.getStatus?e.getStatus():{loaded:!0}]))}}}const m=new I;document.addEventListener("DOMContentLoaded",async()=>{try{await m.init()}catch(r){console.error("[Application] Startup failed:",r)}});typeof window<"u"&&(window.NBW_APP=m,window.NBW_STATE=l,window.NBW_CONTAINER=o,window.NBW_DEBUG={app:m,state:l,container:o,components:f,getStatus:()=>m.getStatus(),getComponentStats:()=>g.getStats(),getPerformanceReport:async()=>(await o.resolve("PerformanceService")).generateReport(),getBundleAnalysis:async()=>(await o.resolve("BundleAnalyzerService")).analyzeBundles(),getVisitorData:async()=>{try{return(await o.resolve("VisitorTrackingService")).exportData()}catch{return{error:"Visitor tracking not initialized or consented"}}},hotReload:()=>m.hotReload(),testBusinessCard:()=>{console.log("=== BUSINESS CARD DEBUG TEST ==="),console.log("Overlay elements:",{overlayContainer:!!document.getElementById("overlay-business-card-container"),overlayCard:!!document.getElementById("overlay-business-card"),overlayInner:!!document.getElementById("overlay-business-card-inner")}),console.log("Section elements:",{sectionCard:!!document.getElementById("business-card"),sectionInner:!!document.getElementById("business-card-inner"),sectionContainer:!!document.querySelector(".business-card-container")});const r=m.getModule("SectionCardRenderer"),t=m.getModule("SectionCardInteractions");console.log("SectionCardRenderer:",{exists:!!r,status:r?.getStatus?.()||"No status method"}),console.log("SectionCardInteractions:",{exists:!!t,status:t?.getStatus?.()||"No status method"}),r&&console.log("Renderer elements:",r.getCardElements()),console.log("All business card elements:",Array.from(document.querySelectorAll('[id*="business-card"], [class*="business-card"]')).map(n=>({tag:n.tagName,id:n.id,classes:n.className})));const e=document.getElementById("business-card");e&&(console.log("Section card click listeners:",e.onclick),console.log("Section card style:",{cursor:e.style.cursor,pointerEvents:e.style.pointerEvents}))}});export{c as _,l as a,m as b,o as c,L as d};
