import{B as u}from"./chunk-DFiJEDgY.js";import{g as i}from"./chunk-DjKJqAo0.js";class v extends u{constructor(e={},s={}){super("BusinessCardRenderer",{debug:!0,...s}),this.businessCard=null,this.businessCardInner=null,this.cardFront=null,this.cardBack=null,this.cardContainer=null,this.isRendered=!1,this.isVisible=!1,this.elementConfig={businessCardId:e.businessCardId||"business-card",businessCardInnerId:e.businessCardInnerId||"business-card-inner",frontSelector:e.frontSelector||"#business-card .business-card-front",backSelector:e.backSelector||"#business-card .business-card-back",containerSelector:e.containerSelector||".business-card-container"},this.log("BusinessCardRenderer constructor completed")}async onInit(){this.log("BusinessCardRenderer initialization started with config:",this.elementConfig);try{if(await this.waitForDOMReady(),this.cacheCardElements(),!this.hasRequiredElements()){this.error("Required card elements not found for config:",this.elementConfig),this.error("Available business card elements in DOM:",{allBusinessCards:Array.from(document.querySelectorAll('[id*="business-card"]')).map(e=>({id:e.id,classes:e.className})),allCardInners:Array.from(document.querySelectorAll('[id*="business-card-inner"]')).map(e=>({id:e.id,classes:e.className})),allContainers:Array.from(document.querySelectorAll('[class*="business-card-container"]')).map(e=>({id:e.id,classes:e.className}))});return}this.setupCardRendering(),this.isRendered=!0,this.log("BusinessCardRenderer initialization completed")}catch(e){this.error("BusinessCardRenderer initialization failed:",e)}}async waitForDOMReady(){return new Promise(e=>{document.readyState==="complete"||document.readyState==="interactive"?e(void 0):document.addEventListener("DOMContentLoaded",e,{once:!0})})}cacheCardElements(){this.log("Caching business card elements with config:",this.elementConfig),this.businessCard=document.getElementById(this.elementConfig.businessCardId),this.businessCardInner=document.getElementById(this.elementConfig.businessCardInnerId),this.cardFront=document.querySelector(this.elementConfig.frontSelector),this.cardBack=document.querySelector(this.elementConfig.backSelector),this.cardContainer=document.querySelector(this.elementConfig.containerSelector),this.log("Card elements found:",{businessCard:!!this.businessCard,businessCardInner:!!this.businessCardInner,cardFront:!!this.cardFront,cardBack:!!this.cardBack,cardContainer:!!this.cardContainer}),this.log("Card element IDs:",{businessCardId:this.businessCard?.id,businessCardInnerId:this.businessCardInner?.id,containerClass:this.cardContainer?.className})}hasRequiredElements(){return!!(this.businessCard&&this.businessCardInner&&this.cardFront&&this.cardBack)}setupCardRendering(){if(this.log("Setting up card rendering..."),!this.hasRequiredElements()){this.error("Cannot setup rendering - required elements missing");return}this.elementConfig.businessCardId==="overlay-business-card"?(this.businessCard.style.opacity="1",this.businessCard.style.visibility="visible",this.businessCard.style.display="block"):(this.log("Setting up section card positioning..."),this.cardContainer&&(this.cardContainer.style.position="static",this.cardContainer.style.margin="0 auto"),this.businessCard.style.position="static",this.businessCard.style.zIndex="auto",this.log("Section card positioning set")),this.businessCardInner.style.transformStyle="preserve-3d",this.cardFront.style.backfaceVisibility="hidden",this.cardBack.style.backfaceVisibility="hidden",this.cardFront.style.transform="rotateY(0deg)",this.cardBack.style.transform="rotateY(180deg)",this.isVisible=!0,this.log("Card rendering setup completed")}getCardElements(){return{businessCard:this.businessCard,businessCardInner:this.businessCardInner,cardFront:this.cardFront,cardBack:this.cardBack,cardContainer:this.cardContainer}}setVisible(e){if(!this.hasRequiredElements()){this.error("Cannot set visibility - required elements missing");return}this.isVisible=e,this.businessCard.style.opacity=e?"1":"0",this.businessCard.style.visibility=e?"visible":"hidden",this.log("Card visibility set to:",e)}enableAfterIntro(){this.elementConfig.businessCardId==="business-card"&&(this.log("Enabling section card after intro completion"),this.businessCard.style.opacity="1",this.businessCard.style.visibility="visible",this.businessCard.style.display="block")}getStatus(){return{...super.getStatus(),isRendered:this.isRendered,isVisible:this.isVisible,hasRequiredElements:this.hasRequiredElements(),elementConfig:this.elementConfig,elements:{businessCard:!!this.businessCard,businessCardInner:!!this.businessCardInner,cardFront:!!this.cardFront,cardBack:!!this.cardBack,cardContainer:!!this.cardContainer}}}async onDestroy(){this.log("BusinessCardRenderer cleanup started"),this.hasRequiredElements()&&this.setVisible(!1),this.businessCard=null,this.businessCardInner=null,this.cardFront=null,this.cardBack=null,this.cardContainer=null,this.isRendered=!1,this.isVisible=!1,this.log("BusinessCardRenderer cleanup completed")}}const F=Object.freeze(Object.defineProperty({__proto__:null,BusinessCardRenderer:v},Symbol.toStringTag,{value:"Module"}));class I extends u{constructor(e,s={}){super("BusinessCardInteractions",{debug:!0,...s}),this.isFlipped=!1,this.isHovering=!1,this.isAnimating=!1,this.isEnabled=!1,this.cardFlipDuration=.8,this.tiltDuration=.3,this.hoverLiftHeight=10,this.maxTiltAngle=12,this.globalTiltAngle=3,this.magneticRange=200,this.businessCard=null,this.businessCardInner=null,this.cardFront=null,this.cardBack=null,this.cardContainer=null,this.cardFlipTimeline=null,this.hoverTimeline=null,this.onCardFlip=null,this.onCardHover=null,this.onCardInteraction=null,this.renderer=e,this.cardFront=null,this.cardBack=null,this.cardContainer=null,this.cardFlipTimeline=null,this.hoverTimeline=null,this.onCardFlip=null,this.onCardHover=null,this.onCardInteraction=null,this.handleCardClick=this.handleCardClick.bind(this),this.handleMouseMove=this.handleMouseMove.bind(this),this.handleGlobalMouseMove=this.handleGlobalMouseMove.bind(this),this.handleMouseEnter=this.handleMouseEnter.bind(this),this.handleMouseLeave=this.handleMouseLeave.bind(this),this.handleTouchStart=this.handleTouchStart.bind(this),this.handleTouchEnd=this.handleTouchEnd.bind(this),this.log("BusinessCardInteractions constructor completed")}async onInit(){this.log("BusinessCardInteractions initialization started");try{if(!this.renderer){this.error("No renderer provided - interactions cannot be initialized");return}const e=this.renderer.getCardElements();if(!e||!e.businessCard){this.error("Renderer has no card elements - interactions cannot be initialized");return}if(this.businessCard=e.businessCard,this.businessCardInner=e.businessCardInner,this.cardFront=e.cardFront,this.cardBack=e.cardBack,this.cardContainer=e.cardContainer,this.log("Got elements from renderer:",{businessCard:!!this.businessCard,businessCardInner:!!this.businessCardInner,cardFront:!!this.cardFront,cardBack:!!this.cardBack,cardContainer:!!this.cardContainer}),typeof i>"u"){this.error("GSAP not loaded - interactions cannot be initialized");return}this.setupInteractions(),this.checkReducedMotion(),this.enableInteractions(),this.log("BusinessCardInteractions initialization completed")}catch(e){this.error("BusinessCardInteractions initialization failed:",e)}}setupInteractions(){if(this.log("Setting up card interactions..."),!this.businessCard||!this.businessCardInner){this.error("Cannot setup interactions - required elements missing");return}i.set(this.businessCard,{perspective:1e3}),i.set(this.businessCardInner,{transformStyle:"preserve-3d"}),this.log("Card interaction setup completed")}enableInteractions(){if(!this.businessCard){this.error("Cannot enable interactions - card element missing");return}this.log("Enabling card interactions..."),this.addEventListeners(),this.setCardCursor(),this.isEnabled=!0,this.log("Card interactions enabled")}disableInteractions(){if(!this.businessCard){this.warn("Cannot disable interactions - card element missing");return}this.log("Disabling card interactions..."),this.removeEventListeners(),this.resetCardCursor(),this.isEnabled=!1,this.log("Card interactions disabled")}addEventListeners(){this.businessCard&&(this.log("Adding card event listeners..."),this.businessCard.addEventListener("click",this.handleCardClick,{passive:!1}),this.businessCard.addEventListener("mousemove",this.handleMouseMove,{passive:!0}),this.businessCard.addEventListener("mouseenter",this.handleMouseEnter,{passive:!0}),this.businessCard.addEventListener("mouseleave",this.handleMouseLeave,{passive:!0}),document.addEventListener("mousemove",this.handleGlobalMouseMove,{passive:!0}),this.businessCard.addEventListener("touchstart",this.handleTouchStart,{passive:!1}),this.businessCard.addEventListener("touchend",this.handleTouchEnd,{passive:!1}),this.log("Card event listeners added"))}removeEventListeners(){this.businessCard&&(this.log("Removing card event listeners..."),this.businessCard.removeEventListener("click",this.handleCardClick),this.businessCard.removeEventListener("mousemove",this.handleMouseMove),this.businessCard.removeEventListener("mouseenter",this.handleMouseEnter),this.businessCard.removeEventListener("mouseleave",this.handleMouseLeave),document.removeEventListener("mousemove",this.handleGlobalMouseMove),this.businessCard.removeEventListener("touchstart",this.handleTouchStart),this.businessCard.removeEventListener("touchend",this.handleTouchEnd),this.log("Card event listeners removed"))}setCardCursor(){this.businessCard&&(this.businessCard.style.cursor="pointer",this.businessCard.style.pointerEvents="auto",this.log("Card cursor and pointer events set"))}resetCardCursor(){this.businessCard&&(this.businessCard.style.cursor="default",this.businessCard.style.pointerEvents="auto",this.log("Card cursor reset"))}handleCardClick(e){if(e.preventDefault(),e.stopPropagation(),!this.isEnabled||this.isAnimating){this.log("Card click ignored - interactions disabled or animating");return}this.log("Card clicked - flipping card"),this.flipCard(),this.onCardInteraction&&this.onCardInteraction("click")}handleMouseMove(e){if(!this.isEnabled||this.isAnimating||!this.isHovering)return;const s=this.businessCard?.getBoundingClientRect();if(!s)return;const a=s.left+s.width/2,d=s.top+s.height/2,t=e.clientX,n=(e.clientY-d)/s.height*-this.maxTiltAngle,r=(t-a)/s.width*this.maxTiltAngle;i.to(this.businessCardInner,{duration:this.tiltDuration*.5,rotationX:n,rotationY:r+(this.isFlipped?180:0),ease:"power2.out"})}handleGlobalMouseMove(e){if(!this.isEnabled||this.isAnimating||this.isHovering||!this.businessCard||!this.businessCardInner)return;const s=this.businessCard.getBoundingClientRect(),a=s.left+s.width/2,d=s.top+s.height/2,t=e.clientX,o=e.clientY,n=t-a,r=o-d,l=Math.sqrt(n*n+r*r);if(l>this.magneticRange){i.to(this.businessCardInner,{duration:this.tiltDuration*2,rotationX:0,rotationY:this.isFlipped?180:0,ease:"power2.out"});return}const C=window.innerWidth/2,b=window.innerHeight/2,m=(t-C)/(window.innerWidth/2),g=(o-b)/(window.innerHeight/2),h=1-l/this.magneticRange,p=g*-this.globalTiltAngle*h,f=m*this.globalTiltAngle*h;i.to(this.businessCardInner,{duration:this.tiltDuration*1.5,rotationX:p,rotationY:f+(this.isFlipped?180:0),ease:"power2.out"})}handleMouseEnter(e){this.isEnabled&&(this.log("Mouse entered card"),this.isHovering=!0,this.hoverTimeline&&this.hoverTimeline.kill(),this.hoverTimeline=i.timeline(),this.hoverTimeline.to(this.businessCard,{duration:.3,y:-this.hoverLiftHeight,ease:"power2.out"}),this.onCardHover&&this.onCardHover(!0))}handleMouseLeave(e){this.isEnabled&&(this.log("Mouse left card"),this.isHovering=!1,this.hoverTimeline&&this.hoverTimeline.kill(),this.hoverTimeline=i.timeline(),this.hoverTimeline.to(this.businessCard,{duration:.5,y:0,ease:"power2.out"}),i.to(this.businessCardInner,{duration:.5,rotationX:0,rotationY:this.isFlipped?180:0,ease:"power2.out"}),this.onCardHover&&this.onCardHover(!1))}handleTouchStart(e){!this.isEnabled||this.isAnimating||(e.preventDefault(),this.log("Touch started on card"))}handleTouchEnd(e){!this.isEnabled||this.isAnimating||(e.preventDefault(),this.log("Touch ended on card - flipping"),this.flipCard(),this.onCardInteraction&&this.onCardInteraction("touch"))}flipCard(){if(!this.businessCardInner||this.isAnimating){this.log("Cannot flip card - element missing or animating");return}this.log("Starting card flip animation"),this.isAnimating=!0,this.cardFlipTimeline&&this.cardFlipTimeline.kill(),this.isFlipped=!this.isFlipped,this.cardFlipTimeline=i.timeline({onComplete:()=>{this.isAnimating=!1,this.log("Card flip animation completed"),this.onCardFlip&&this.onCardFlip(this.isFlipped)}}),this.cardFlipTimeline.to(this.businessCardInner,{duration:this.cardFlipDuration,rotationY:this.isFlipped?180:0,ease:"power2.inOut"})}checkReducedMotion(){const e=window.matchMedia("(prefers-reduced-motion: reduce)");return e.matches&&(this.log("User prefers reduced motion - disabling animations"),this.cardFlipDuration=.1,this.tiltDuration=.1,this.hoverLiftHeight=2,this.maxTiltAngle=2,this.globalTiltAngle=1,this.magneticRange=100),e.addEventListener("change",()=>{this.checkReducedMotion()}),e.matches}getCurrentSide(){return this.isFlipped?"back":"front"}resetCard(){this.businessCardInner&&(this.log("Resetting card to front"),this.isFlipped=!1,this.isAnimating=!1,this.isHovering=!1,i.set(this.businessCardInner,{rotationY:0,rotationX:0}),i.set(this.businessCard,{y:0}))}getStatus(){return{...super.getStatus(),isEnabled:this.isEnabled,isFlipped:this.isFlipped,isHovering:this.isHovering,isAnimating:this.isAnimating,currentSide:this.getCurrentSide(),hasRenderer:!!this.renderer,hasElements:!!(this.businessCard&&this.businessCardInner)}}async onDestroy(){this.log("BusinessCardInteractions cleanup started"),this.disableInteractions(),this.cardFlipTimeline&&(this.cardFlipTimeline.kill(),this.cardFlipTimeline=null),this.hoverTimeline&&(this.hoverTimeline.kill(),this.hoverTimeline=null),this.resetCard(),this.businessCard=null,this.businessCardInner=null,this.cardFront=null,this.cardBack=null,this.cardContainer=null,this.renderer=null,this.log("BusinessCardInteractions cleanup completed")}}const k=Object.freeze(Object.defineProperty({__proto__:null,BusinessCardInteractions:I},Symbol.toStringTag,{value:"Module"}));export{k as a,F as b};
