import{B as r}from"./chunk-DFiJEDgY.js";import{a as e}from"./chunk-Dmuk_T3B.js";import"./index-DIemqqyN.js";import"./chunk-C20AiJlz.js";class l extends r{constructor(t={}){super("ThemeModule",t),this.themeButton=null}async onInit(){this.themeButton=this.getElement("themeButton","#toggle-theme",!0),this.themeButton&&this.setupThemeToggle(),this.unsubscribeState=e.subscribeToProperty("theme",t=>{this.applyTheme(t)}),this.applyTheme(e.getState().theme)}setupThemeToggle(){this.themeButton&&(this.addEventListener(this.themeButton,"click",()=>{this.toggleTheme()}),this.updateThemeButton(e.getState().theme))}toggleTheme(){const h=e.getState().theme==="dark"?"light":"dark";e.setState({theme:h}),this.log(`Theme switched to: ${h}`)}applyTheme(t){document.documentElement.setAttribute("data-theme",t),localStorage.setItem("theme",t),this.updateThemeButton(t),this.log(`Applied theme: ${t}`)}updateThemeButton(t){if(!this.themeButton)return;const h=this.themeButton.querySelector(".icon-wrap");if(!h)return;const s=t==="dark"?"0deg":"180deg";h.style.transform=`rotate(${s})`;const o=t==="dark"?"Switch to light theme":"Switch to dark theme";this.themeButton.setAttribute("aria-label",o)}getCurrentTheme(){return e.getState().theme}setTheme(t){e.setState({theme:t})}onDestroy(){this.unsubscribeState&&this.unsubscribeState()}}export{l as ThemeModule};
