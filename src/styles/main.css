/**
 * @file css/main.css
 * This stylesheet defines the base styles and snap-scroll layout for the website.
 * 
 * Layout System:
 * - Each section takes exactly the remaining viewport height after header
 * - Scroll snap behavior ensures only one section is visible at a time
 * - Content scales proportionally to fit within each section
 * - Footer appears after all sections, not overlaid
 * 
 * Responsive Design:
 * - Viewport-based sizing with header height calculations
 * - Content scaling maintains proportions across devices
 * - Smooth snap scrolling on all screen sizes
 */

/* CSS Custom Properties for Layout - Fixed values to prevent CLS */
:root {
  --header-height: 60px; /* Fixed header height */
  --footer-height: 40px; /* Fixed footer height */
  /* Prevent layout shift during font loading */
  font-display: swap;
}

/* Reset and Base Styles */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
  /* Disable scroll snap initially to prevent auto-scroll on load */
}

body {
  background-color: var(--color-neutral-300);
  color: var(--color-dark);
  font-family: Arial, Helvetica, sans-serif;
  font-weight: 500;
  line-height: 1.4;
  transition: background-color 0.3s ease, color 0.3s ease;
  overflow-x: hidden;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
}

/* Typography - Universal H tag styling across all pages */
h1, h2, h3, h4, h5, h6 {
  font-family: var(--font--acme);
  line-height: 1.2;
  text-transform: uppercase;
  text-shadow: 0 2px 4px var(--color-shadow);
  margin: 0 0 1rem 0;
  padding: 0;
}

/* Specific H tag sizes with consistent spacing */
h1 {
  font-size: clamp(1.75rem, 4vw, 2.5rem);
  margin-bottom: clamp(1rem, 2.5vw, 1.5rem);
}

h2 {
  font-size: clamp(1.5rem, 3.5vw, 2rem);
  margin-bottom: clamp(0.875rem, 2vw, 1.25rem);
}

h3 {
  font-size: clamp(1.25rem, 3vw, 1.75rem);
  margin-bottom: clamp(0.75rem, 1.75vw, 1.125rem);
}

h4 {
  font-size: clamp(1.125rem, 2.5vw, 1.5rem);
  margin-bottom: clamp(0.625rem, 1.5vw, 1rem);
}

h5 {
  font-size: clamp(1rem, 2vw, 1.25rem);
  margin-bottom: clamp(0.5rem, 1.25vw, 0.875rem);
}

h6 {
  font-size: clamp(0.875rem, 1.75vw, 1.125rem);
  margin-bottom: clamp(0.5rem, 1vw, 0.75rem);
}

/* Universal Layout - Consistent across all pages */
.header {
  height: var(--header-height);
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  z-index: 100;
}

.footer {
  height: var(--footer-height);
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  z-index: 10;
}

/* Main content area - properly calculated between header and footer */
main {
  position: fixed;
  top: var(--header-height);
  bottom: var(--footer-height);
  left: 0;
  right: 0;
  width: 100vw;
  height: calc(100vh - var(--header-height) - var(--footer-height));
  overflow-y: auto;
  overflow-x: hidden;
}

/* Universal form field styling */
.form-input,
.form-textarea,
.form-select,
input[type="text"],
input[type="email"],
input[type="password"],
input[type="tel"],
textarea,
select {
  padding: clamp(6px, 1.5vw, 12px) clamp(8px, 2vw, 14px);
  border: 2px solid var(--form-input-border);
  border-radius: clamp(6px, 1.5vw, 12px);
  font-size: clamp(0.75rem, 2vw, 1rem);
  background-color: var(--color-neutral-100);
  color: var(--fg);
  font-family: inherit;
  box-sizing: border-box;
  transition: all 0.2s ease;
}

/* Universal focus styling */
.form-input:focus,
.form-textarea:focus,
.form-select:focus,
input:focus,
textarea:focus,
select:focus {
  outline: 2px solid var(--color-primary);
  outline-offset: 2px;
}

/* Additional Typography Styles */

p {
  line-height: 1.6;
}

/* Main Layout - Fixed height to prevent CLS */
main {
  position: fixed;
  top: var(--header-height);
  bottom: var(--footer-height);
  left: 0;
  right: 0;
  width: 100vw;
  height: calc(100vh - var(--header-height) - var(--footer-height));
  padding: 0;
  margin: 0;
  overflow-y: auto;
  overflow-x: hidden;
  display: flex;
  flex-direction: column;
}

/* ===============================================
   UNIVERSAL PAGE SYSTEM - CONTROLS ALL PAGES
   =============================================== */

/* UNIVERSAL SECTION CENTERING - BASED ON MAIN PAGE PATTERN */
/* All pages use the same section structure as index.html */
.business-card-section,
.about-section,
.contact-section,
.hero-section,
.client-login,
.page-section,
main > section {
  min-height: calc(100vh - var(--header-height) - var(--footer-height));
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  padding: clamp(1rem, 4vw, 2rem);
  box-sizing: border-box;
  flex: 1 0 100%;
  width: 100%;
  position: relative;
  overflow: hidden;
}

/* UNIVERSAL CONTAINER - BASED ON MAIN PAGE PATTERN */
/* All pages use the same container structure as index.html */
.container,
.about-content,
.section-content,
.login-wrapper,
.page-content {
  max-width: min(1000px, 90vw);
  width: 100%;
  margin: 0 auto;
  padding: 1rem;
  box-sizing: border-box;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  gap: 1rem;
}

/* UNIVERSAL FORM STYLING - All forms look identical */
.form-input,
.form-textarea,
.form-select,
input[type="text"],
input[type="email"],
input[type="password"],
input[type="tel"],
textarea,
select {
  width: 100%;
  padding: clamp(6px, 1.5vw, 12px) clamp(8px, 2vw, 14px);
  border: 2px solid var(--form-input-border);
  border-radius: clamp(6px, 1.5vw, 12px);
  font-size: clamp(0.75rem, 2vw, 1rem);
  background-color: var(--color-neutral-100);
  color: var(--fg);
  font-family: inherit;
  box-sizing: border-box;
  transition: all 0.2s ease;
  height: clamp(32px, 8vw, 44px);
}

textarea {
  height: auto;
  min-height: clamp(60px, 15vw, 100px);
  resize: vertical;
}

/* UNIVERSAL FORM FOCUS - Identical across all pages */
.form-input:focus,
.form-textarea:focus,
.form-select:focus,
input:focus,
textarea:focus,
select:focus {
  outline: 2px solid var(--color-primary);
  outline-offset: 2px;
}

/* UNIVERSAL BUTTON STYLING - All buttons identical */
.btn,
.form-button,
.login-btn,
.btn-primary,
.btn-secondary {
  padding: clamp(8px, 2vw, 12px) clamp(16px, 4vw, 24px);
  border: 4px solid #000000;
  border-radius: 0;
  font-size: clamp(0.8rem, 2vw, 1rem);
  font-weight: 600;
  cursor: pointer;
  font-family: inherit;
  text-shadow: 0 2px 4px var(--color-shadow);
  box-shadow: 0 4px 8px var(--color-shadow);
  transition: background-color 0.3s ease;
  text-transform: uppercase;
  box-sizing: border-box;
}

/* Primary button style */
.btn-primary,
.form-button,
.login-btn {
  background-color: var(--color-neutral-300);
  color: var(--fg);
}

/* Active/Valid button style */
.btn-primary.form-valid,
.form-button.form-valid,
.login-btn.form-valid {
  background-color: var(--color-primary);
  color: var(--color-bg, #000);
}

/* Secondary button style */
.btn-secondary {
  background-color: var(--color-neutral-100);
  color: var(--fg);
}

/* UNIVERSAL FORM CONTAINER STYLING */
.form-container,
.contact-form,
.login-form {
  background: var(--color-neutral-300);
  padding: clamp(8px, 2.5vw, 20px);
  border-radius: 0;
  border: 4px solid #000000;
  box-shadow: 0 4px 8px var(--color-shadow);
  max-width: min(600px, 95vw);
  width: 100%;
  margin: 0 auto;
  box-sizing: border-box;
  display: flex;
  flex-direction: column;
  gap: clamp(8px, 2vw, 16px); /* Consistent spacing between all form elements */
}

/* UNIVERSAL FORM GROUP SPACING */
.form-group,
.form-row {
  margin: 0; /* Remove default margins, use gap from parent */
  display: flex;
  flex-direction: column;
  gap: clamp(4px, 1vw, 8px); /* Spacing between label and input */
}

/* Form labels consistent spacing */
.form-group label,
label {
  display: block;
  margin-bottom: 0; /* Controlled by parent gap */
  font-weight: 600;
  color: var(--color-dark);
  font-size: clamp(0.875rem, 2.5vw, 1rem);
}

/* Form intro text spacing */
.form-intro {
  margin: 0; /* Use parent gap instead */
  color: var(--fg);
  font-size: clamp(0.875rem, 2vw, 1rem);
  line-height: 1.4;
  text-align: center;
}

/* Error messages consistent spacing */
.error-message,
.login-error {
  margin: 0; /* Use parent gap instead */
  color: #ef4444;
  font-size: 0.875rem;
  display: none;
}

.error-message.show,
.login-error.show {
  display: block;
}

/* Form footer elements (like login-footer) */
.login-footer,
.form-footer {
  margin-top: clamp(8px, 2vw, 16px);
  padding-top: clamp(8px, 2vw, 16px);
  border-top: 1px solid var(--color-dark);
  text-align: center;
}

.login-footer p,
.form-footer p {
  margin: clamp(4px, 1vw, 8px) 0;
  color: var(--fg);
  font-size: 0.9rem;
}

/* Show all sections immediately */
main section:not(.business-card-section) {
  opacity: 1;
  visibility: visible;
}

/* Footer fixed at bottom of viewport */
.footer {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  height: var(--footer-height);
  background: var(--color-neutral-300);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 10;
}

/* Footer content always visible */
.footer .footer-text {
  opacity: 1;
  visibility: visible;
  color: var(--color-dark);
  font-size: 0.75rem; /* Smaller text */
  text-align: center;
  text-transform: uppercase;
}

/* Sections always visible - no intro delay */
main section:not(.business-card-section) {
  opacity: 1;
  visibility: visible;
}

/* Footer stays visible and positioned at bottom */

/* Section Base Styles - Fill main content area */
section {
  flex: 1 0 100%; /* Flex grow to fill available space, no shrink, basis 100% */
  width: 100%;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  padding: 1rem; /* Reduced padding to ensure content fits */
  position: relative;
  box-sizing: border-box;
  overflow: hidden; /* No scrolling on individual sections */
  /* Ensure content scales to fit */
  min-height: 0; /* Allow flexbox to shrink */
}

/* Ensure page starts at top */
#intro {
  scroll-margin-top: 0;
}

/* Business Card Section - centered in main content area */
.business-card-section {
  flex: 1 0 100%; /* Flex grow to fill available space, no shrink, basis 100% */
  position: relative;
  z-index: 1;
  background: var(--color-neutral-300);
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  overflow: visible; /* Allow business card to be fully visible */
  /* Ensure it's positioned at top of main area */
  margin-top: 0;
  scroll-snap-align: start;
  padding: 1rem; /* Add padding to prevent cutoff at edges */
}

/* Section business card - positioning handled by BusinessCardRenderer */
.business-card-section .business-card-container {
  /* Positioning handled by BusinessCardRenderer module */
}

.business-card-section .scroll-arrow-intro {
  position: fixed;
  bottom: calc(var(--footer-height) + 1rem); /* 1rem above footer */
  left: 50%;
  transform: translateX(-50%);
  z-index: 10;
}

/* Smooth fade out of intro animation container after intro completion */
#intro-animation-container {
  transition: opacity 0.8s ease-out, visibility 0.8s ease-out;
}

/* Intro animation container - controlled by intro module */
#intro-animation-container {
  /* Styling controlled by intro module and business-card.css */
}

/* Enable scroll snap only on main container */
html {
  scroll-behavior: smooth;
}

main {
  scroll-snap-type: y mandatory;
}

section {
  scroll-snap-align: start;
  scroll-snap-stop: always;
}

/* Container for content within sections - Proportional scaling */
.section-content {
  max-width: min(1000px, 90vw); /* Responsive max-width */
  width: 100%;
  height: 100%;
  margin: 0 auto;
  padding: 1rem;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  box-sizing: border-box;
  gap: 1rem;
  
  /* Scale content to fit proportionally */
  transform-origin: center center;
  
  /* Ensure content scales but maintains readability */
  font-size: clamp(0.875rem, 2vw, 1.125rem);
}

/* Scale down About and Contact sections to fit main content area */
.about-section,
.contact-section {
  padding: 1.5rem;
  gap: 1rem;
  /* Remove scale transform to allow full section fill */
}

.about-section h2,
.contact-section h2 {
  font-size: clamp(1.2rem, 3vw, 1.8rem);
  margin-bottom: 1rem;
  text-align: center;
}

/* About section specific styling */
.about-content {
  max-width: min(700px, 90vw);
  text-align: left;
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.about-content p {
  font-size: clamp(0.85rem, 2vw, 1rem);
  line-height: 1.6;
  color: var(--fg);
}

.tech-stack {
  background-color: #f8f9fa;
  padding: 1rem;
  border-radius: 8px;
  border: 2px solid var(--color-neutral-400);
}

/* Dark theme tech stack background */
html[data-theme="dark"] .tech-stack {
  background-color: #1e1e1e;
}

.tech-stack h3 {
  font-size: clamp(1rem, 2.5vw, 1.2rem);
  margin-bottom: 0.5rem;
  color: var(--fg);
  font-weight: 600;
}

.tech-list {
  font-size: clamp(0.8rem, 1.8vw, 0.9rem);
  line-height: 1.5;
  color: var(--color-neutral-600);
}

.closing-statement {
  font-weight: 600;
  text-align: left;
  font-size: clamp(0.9rem, 2.2vw, 1.1rem);
  color: var(--color-primary, var(--fg));
}

/* Contact section styling */
.contact-section p {
  font-size: clamp(0.8rem, 1.8vw, 1rem);
  max-width: 600px;
  text-align: center;
  line-height: 1.4;
}

/* Hero/Works section styling - match other sections */
.hero-section {
  padding: 1.5rem;
  gap: 1rem;
  text-align: center;
}

.hero-content {
  max-width: min(700px, 90vw);
  width: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 1rem;
}

.hero-title {
  font-size: clamp(1.2rem, 3vw, 1.8rem);
  margin-bottom: 1rem;
  text-align: center;
  margin: 0;
  padding: 0;
}

/* Scale contact form to fit in viewport */
.contact-section {
  padding: 0.5rem;
  gap: 0.5rem;
}

.contact-section h2 {
  font-size: clamp(1.2rem, 3vw, 1.8rem);
  margin-bottom: 0.25rem;
}

.contact-section p {
  font-size: clamp(0.8rem, 1.5vw, 1rem);
  margin-bottom: 0.5rem;
  max-width: 600px;
}

.contact-form {
  max-width: min(600px, 90vw);
  width: 100%;
  flex-shrink: 1;
  margin: 0 auto;
}

/* Content scaling for different section types */
.section-content > * {
  flex-shrink: 1; /* Allow content to shrink */
  max-width: 100%;
  max-height: 100%;
}

/* Headings scale proportionally */
.section-content h1 {
  font-size: clamp(2rem, 5vw, 4rem);
}

.section-content h2 {
  font-size: clamp(1.5rem, 4vw, 3rem);
}

.section-content h3 {
  font-size: clamp(1.25rem, 3vw, 2rem);
}

/* Typography Classes */
.p-small {
  font-size: clamp(0.75rem, 1.5vw, 0.875rem);
  text-shadow: 0 1px 2px var(--color-shadow);
}

.p-large {
  font-size: clamp(1rem, 2.5vw, 1.25rem);
  font-weight: 600;
}

/* Link Styles */
.text-link {
  text-decoration: none;
  position: relative;
  color: inherit;
  transition: color 0.3s ease;
}

.text-link::after {
  content: '';
  position: absolute;
  bottom: -2px;
  left: 0;
  width: 0;
  height: 2px;
  background-color: currentColor;
  transition: width 0.3s ease;
}

.text-link:hover::after {
  width: 100%;
}

/* Responsive Visibility */
.hidden { display: none; }

@media (max-width: 767px) {
  .md\:hidden { display: none; }
  .sm\:block { display: block; }
}

@media (min-width: 768px) {
  .md\:block { display: block; }
  .sm\:hidden { display: none; }
}

/* Responsive Images */
img {
  max-width: 100%;
  height: auto;
  display: block;
}

.img-responsive {
  width: 100%;
  height: auto;
  object-fit: cover;
}

/* Responsive Video */
.video-responsive {
  position: relative;
  padding-bottom: 56.25%; /* 16:9 aspect ratio */
  height: 0;
  overflow: hidden;
}

.video-responsive iframe,
.video-responsive video {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}

/* Improved Focus States for Accessibility */
*:focus {
  outline: 2px solid var(--color-primary);
  outline-offset: 2px;
}

/* Reduced Motion Support */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* High Contrast Mode Support */
@media (prefers-contrast: high) {
  :root {
    --color-shadow: rgba(0, 0, 0, 0.8);
  }
}

/* Print Styles */
@media print {
  * {
    background: transparent !important;
    color: black !important;
    box-shadow: none !important;
    text-shadow: none !important;
  }
  
  body {
    font-size: 12pt;
    line-height: 1.5;
  }
  
  .no-print {
    display: none !important;
  }
}

/* Responsive Design */
@media screen and (max-width: 1024px) {
  :root {
    --header-height: 50px;
  }
  
  main {
    top: var(--header-height);
    height: calc(100vh - var(--header-height) - var(--footer-height));
  }
  
  section {
    padding: 1.5rem;
  }
  
  .section-content {
    max-width: min(900px, 92vw);
    padding: 0.75rem;
  }
}

@media screen and (max-width: 767px) {
  :root {
    --header-height: 45px;
  }
  
  main {
    top: var(--header-height);
    height: calc(100vh - var(--header-height) - var(--footer-height));
  }
  
  section {
    height: calc(100svh - var(--header-height));
    padding: 1rem;
  }
  
  .section-content {
    max-width: 95vw;
    padding: 0.5rem;
    font-size: clamp(0.8rem, 2.5vw, 1rem);
  }
  
  .section-content h1 {
    font-size: clamp(1.5rem, 6vw, 2.5rem);
  }
  
  .section-content h2 {
    font-size: clamp(1.25rem, 5vw, 2rem);
  }
  
  /* Mobile about section */
  .about-content {
    max-width: 95vw;
    gap: 0.8rem;
  }
  
  .tech-stack {
    padding: 0.8rem;
  }
}

@media screen and (max-width: 479px) {
  section {
    padding: 0.75rem;
  }
  
  .section-content {
    max-width: 98vw;
    padding: 0.25rem;
  }
}

/* Hover Effects for Interactive Elements */
@media (hover: hover) {
  .text-link:hover {
    color: var(--color-primary, #007bff);
  }
}

/* Smooth Transitions */
* {
  transition-property: background-color, color, border-color, opacity, transform;
  transition-duration: 0.2s;
  transition-timing-function: ease-out;
}

/* Custom scrollbar for better UX */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: var(--color-neutral-200, #f1f3f4);
}

::-webkit-scrollbar-thumb {
  background: var(--color-neutral-400, #9aa0a6);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: var(--color-neutral-500, #5f6368);
}