/**
 * ===============================================
 * INLINE TABLE DROPDOWNS
 * ===============================================
 * @file src/styles/admin/table-dropdowns.css
 *
 * Compact custom dropdowns for use in table cells.
 * Should not change row height.
 * Includes status dropdowns with colored dots.
 */

/* Ensure status cells allow dropdown overflow and maintain consistent height */
[data-page="admin"] .admin-table td.status-cell {
  overflow: visible;
  position: relative;
  vertical-align: middle;
  height: 48px;
  padding: var(--space-2) var(--space-4);
  box-sizing: border-box;
}

[data-page="admin"] .table-dropdown {
  position: relative;
  display: inline-block;
  min-width: 100px;
  height: 32px;
  vertical-align: middle;
}

/* Base trigger styles */
[data-page="admin"] .table-dropdown .custom-dropdown-trigger {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: var(--space-2) var(--space-3);
  padding-right: var(--space-1-5);
  border: 2px solid transparent;
  background-color: transparent;
  color: var(--portal-text-light);
  font-size: var(--font-size-sm);
  font-weight: 400;
  line-height: 1.5;
  cursor: pointer;
  white-space: nowrap;
  box-shadow: none;
  box-sizing: border-box;
  height: 32px;
  margin: 0;
  text-align: left;
}

/* Status dropdowns: trigger text aligns with menu item text */
[data-page="admin"] .table-dropdown .custom-dropdown-trigger:has(.status-dot) {
  padding-left: calc(var(--space-3) - 8px - var(--space-0-5));
}

/* Hover state - red border */
[data-page="admin"] .table-dropdown .custom-dropdown-trigger:hover {
  border-color: var(--color-primary);
}

/* Focus state */
[data-page="admin"] .table-dropdown .custom-dropdown-trigger:focus,
[data-page="admin"] .table-dropdown .custom-dropdown-trigger:focus-visible {
  outline: none !important;
  outline-offset: 0 !important;
  border-color: var(--color-primary);
  box-shadow: none !important;
}

/* Open state */
[data-page="admin"] .table-dropdown.open .custom-dropdown-trigger {
  border-color: var(--color-primary);
  border-bottom-color: transparent;
  border-radius: var(--portal-radius-lg) var(--portal-radius-lg) 0 0;
  z-index: var(--z-index-portal-dropdown);
  position: relative;
  background-color: var(--portal-bg-darker, rgba(0, 0, 0, 0.25));
}

/* Status dot */
[data-page="admin"] .table-dropdown .status-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  flex-shrink: 0;
  margin-right: var(--space-0-5);
  background-color: var(--portal-text-muted);
}

[data-page="admin"] .table-dropdown .custom-dropdown-text {
  flex: 1;
  min-width: 0;
  font-size: var(--font-size-sm);
  font-weight: 400;
  line-height: 1.5;
  text-align: left;
  align-self: center;
}

[data-page="admin"] .table-dropdown .custom-dropdown-caret {
  width: 12px;
  height: 12px;
  flex-shrink: 0;
  margin-left: var(--space-2);
}

/* Dropdown menu */
[data-page="admin"] .table-dropdown.custom-dropdown .custom-dropdown-menu {
  position: absolute;
  top: 100%;
  left: 0;
  right: auto;
  width: auto;
  min-width: 100%;
  margin: 0;
  padding: 0;
  list-style: none;
  background-color: var(--portal-bg-dark);
  border: 2px solid var(--color-primary);
  border-top: none;
  border-radius: 0 0 var(--portal-radius-lg) var(--portal-radius-lg);
  z-index: var(--z-index-portal-dropdown);
  display: none;
  box-shadow: none;
  clip-path: none;
  max-height: none;
  box-sizing: border-box;
  text-align: left;
}

/* Details panel dropdown override */
[data-page="admin"] .details-panel .table-dropdown .custom-dropdown-trigger {
  background-color: var(--color-black);
}

[data-page="admin"] .details-panel .table-dropdown .custom-dropdown-menu {
  background-color: var(--portal-bg-readonly);
  left: 0;
  right: auto;
  min-width: 100%;
}

[data-page="admin"] .table-dropdown.custom-dropdown.open .custom-dropdown-menu {
  display: block;
  margin-top: -2px;
}

/* Open upward when near bottom */
[data-page="admin"] .table-dropdown.dropdown-open-up.open .custom-dropdown-trigger {
  border-top-color: transparent;
  border-bottom-color: var(--color-primary);
  border-radius: 0 0 var(--portal-radius-lg) var(--portal-radius-lg);
}

[data-page="admin"] .table-dropdown.dropdown-open-up.open .custom-dropdown-menu {
  top: auto;
  bottom: 100%;
  margin-top: 0;
  margin-bottom: -2px;
  border-top: none;
  border-bottom: 2px solid var(--color-primary);
  border-radius: var(--portal-radius-lg) var(--portal-radius-lg) 0 0;
}

/* Dropdown items */
[data-page="admin"] .table-dropdown .custom-dropdown-item {
  display: flex;
  align-items: center;
  justify-content: flex-start;
  padding: var(--space-2) var(--space-3);
  height: 32px;
  font-size: var(--font-size-sm);
  font-weight: 400;
  line-height: 1.5;
  background-color: transparent;
  color: var(--portal-text-light);
  cursor: pointer;
  transition: background-color 0.15s ease;
  box-sizing: border-box;
  text-align: left;
}

[data-page="admin"] .table-dropdown .custom-dropdown-item:hover {
  background-color: var(--color-primary);
}

/* Filter dropdown with checkmarks */
[data-page="admin"] .table-dropdown.filter-dropdown-with-check {
  min-width: 12rem;
}

[data-page="admin"] .table-dropdown.filter-dropdown-with-check .filter-dropdown-check {
  width: 1rem;
  flex-shrink: 0;
  text-align: center;
  margin-right: calc(var(--space-0-5) / 2);
}

[data-page="admin"] .table-dropdown.filter-dropdown-with-check .custom-dropdown-item {
  padding-left: calc(var(--space-3) / 2);
}

[data-page="admin"] .table-dropdown.filter-dropdown-with-check .custom-dropdown-item .custom-dropdown-text {
  flex: 1;
  min-width: min-content;
  text-align: left;
  white-space: nowrap;
  overflow: visible;
}

[data-page="admin"] .table-dropdown.filter-dropdown-with-check .custom-dropdown-trigger .custom-dropdown-text {
  text-align: left;
}

[data-page="admin"] .table-dropdown.filter-dropdown-with-check .custom-dropdown-trigger {
  padding-left: calc(var(--space-3) / 2 + 1rem + var(--space-0-5) / 2);
}

/* ================================================
   Status Dot Colors - Trigger
   ================================================ */

[data-page="admin"] .table-dropdown[data-status="new"] .status-dot {
  background-color: var(--color-status-new);
}

[data-page="admin"] .table-dropdown[data-status="pending"] .status-dot {
  background-color: var(--color-status-pending);
}

[data-page="admin"] .table-dropdown[data-status="read"] .status-dot,
[data-page="admin"] .table-dropdown[data-status="qualified"] .status-dot,
[data-page="admin"] .table-dropdown[data-status="contacted"] .status-dot {
  background-color: var(--color-status-read);
}

[data-page="admin"] .table-dropdown[data-status="responded"] .status-dot,
[data-page="admin"] .table-dropdown[data-status="converted"] .status-dot,
[data-page="admin"] .table-dropdown[data-status="active"] .status-dot,
[data-page="admin"] .table-dropdown[data-status="in_progress"] .status-dot,
[data-page="admin"] .table-dropdown[data-status="in-progress"] .status-dot {
  background-color: var(--color-status-responded);
}

[data-page="admin"] .table-dropdown[data-status="completed"] .status-dot {
  background-color: var(--color-status-completed);
}

[data-page="admin"] .table-dropdown[data-status="on-hold"] .status-dot,
[data-page="admin"] .table-dropdown[data-status="on_hold"] .status-dot {
  background-color: var(--color-status-pending);
}

[data-page="admin"] .table-dropdown[data-status="archived"] .status-dot,
[data-page="admin"] .table-dropdown[data-status="lost"] .status-dot,
[data-page="admin"] .table-dropdown[data-status="cancelled"] .status-dot,
[data-page="admin"] .table-dropdown[data-status="inactive"] .status-dot,
[data-page="admin"] .table-dropdown[data-status="closed"] .status-dot,
[data-page="admin"] .table-dropdown[data-status="draft"] .status-dot {
  background-color: var(--color-status-archived);
}

[data-page="admin"] .table-dropdown[data-status="overdue"] .status-dot {
  background-color: var(--color-status-overdue);
}

[data-page="admin"] .table-dropdown[data-status="planning"] .status-dot,
[data-page="admin"] .table-dropdown[data-status="partial"] .status-dot {
  background-color: var(--color-status-pending);
}

[data-page="admin"] .table-dropdown[data-status="sent"] .status-dot,
[data-page="admin"] .table-dropdown[data-status="viewed"] .status-dot {
  background-color: var(--color-status-new);
}

[data-page="admin"] .table-dropdown[data-status="review"] .status-dot {
  background-color: var(--color-status-read);
}

[data-page="admin"] .table-dropdown[data-status="paid"] .status-dot {
  background-color: var(--color-status-responded);
}

/* ================================================
   Status Dot Colors - Menu Items
   ================================================ */

[data-page="admin"] .custom-dropdown-item[data-status="new"] .status-dot {
  background-color: var(--color-status-new);
}

[data-page="admin"] .custom-dropdown-item[data-status="pending"] .status-dot {
  background-color: var(--color-status-pending);
}

[data-page="admin"] .custom-dropdown-item[data-status="read"] .status-dot,
[data-page="admin"] .custom-dropdown-item[data-status="qualified"] .status-dot,
[data-page="admin"] .custom-dropdown-item[data-status="contacted"] .status-dot {
  background-color: var(--color-status-read);
}

[data-page="admin"] .custom-dropdown-item[data-status="responded"] .status-dot,
[data-page="admin"] .custom-dropdown-item[data-status="converted"] .status-dot,
[data-page="admin"] .custom-dropdown-item[data-status="active"] .status-dot,
[data-page="admin"] .custom-dropdown-item[data-status="in_progress"] .status-dot,
[data-page="admin"] .custom-dropdown-item[data-status="in-progress"] .status-dot {
  background-color: var(--color-status-responded);
}

[data-page="admin"] .custom-dropdown-item[data-status="completed"] .status-dot {
  background-color: var(--color-status-completed);
}

[data-page="admin"] .custom-dropdown-item[data-status="on-hold"] .status-dot,
[data-page="admin"] .custom-dropdown-item[data-status="on_hold"] .status-dot {
  background-color: var(--color-status-pending);
}

[data-page="admin"] .custom-dropdown-item[data-status="archived"] .status-dot,
[data-page="admin"] .custom-dropdown-item[data-status="lost"] .status-dot,
[data-page="admin"] .custom-dropdown-item[data-status="cancelled"] .status-dot,
[data-page="admin"] .custom-dropdown-item[data-status="inactive"] .status-dot,
[data-page="admin"] .custom-dropdown-item[data-status="closed"] .status-dot,
[data-page="admin"] .custom-dropdown-item[data-status="draft"] .status-dot {
  background-color: var(--color-status-archived);
}

[data-page="admin"] .custom-dropdown-item[data-status="overdue"] .status-dot {
  background-color: var(--color-status-overdue);
}

[data-page="admin"] .custom-dropdown-item[data-status="planning"] .status-dot,
[data-page="admin"] .custom-dropdown-item[data-status="partial"] .status-dot {
  background-color: var(--color-status-pending);
}

[data-page="admin"] .custom-dropdown-item[data-status="sent"] .status-dot,
[data-page="admin"] .custom-dropdown-item[data-status="viewed"] .status-dot {
  background-color: var(--color-status-new);
}

[data-page="admin"] .custom-dropdown-item[data-status="review"] .status-dot {
  background-color: var(--color-status-read);
}

[data-page="admin"] .custom-dropdown-item[data-status="paid"] .status-dot {
  background-color: var(--color-status-responded);
}
