/**
 * ===============================================
 * PORTAL DROPDOWN COMPONENT
 * ===============================================
 * @file src/styles/shared/portal-dropdown.css
 *
 * Reusable custom dropdown component for forms and modals.
 * Based on Messages dropdown pattern (seamless trigger + menu)
 *
 * Override these CSS custom properties in context:
 *   --dropdown-bg: background color for trigger and menu
 *   --dropdown-border-color: border color when closed (match bg for invisible)
 *   --dropdown-border-width: border width (default 1px)
 *   --dropdown-radius: border radius (default var(--border-radius-sm))
 */

/* ================================================
   Modal/Form Dropdown Component
   ================================================
   Pattern (matches Messages dropdown):
   - Same background on trigger and menu
   - Trigger: border-bottom: none when open
   - Menu: margin-top negative to overlap
   - No visible seam between trigger and menu
   ================================================ */

/* Dropdown wrapper - just positioning */
.custom-dropdown[data-modal-dropdown] {
  position: relative;
  width: 100%;
  background: transparent;
  border: none;
  border-radius: 0;

  /* Default values - override in context */
  --dropdown-bg: var(--color-black);
  --dropdown-border-color: var(--portal-border-dark);
  --dropdown-border-width: 1px;
  --dropdown-radius: var(--portal-radius-lg);
}

/* Dropdown trigger button - CLOSED state */
.custom-dropdown[data-modal-dropdown] .custom-dropdown-trigger {
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: var(--space-3) var(--space-4);
  background-color: var(--dropdown-bg);
  border: var(--dropdown-border-width) solid var(--dropdown-border-color);
  border-radius: var(--dropdown-radius);
  font-size: var(--font-size-base);
  font-weight: 400;
  color: var(--portal-text-light);
  cursor: pointer;
  text-align: left;
  box-shadow: none;
  box-sizing: border-box;
}

.custom-dropdown[data-modal-dropdown] .custom-dropdown-trigger:focus {
  outline: none;
}

.custom-dropdown[data-modal-dropdown] .custom-dropdown-trigger:hover {
  border-color: var(--color-brand-primary);
}

/* Trigger - OPEN state */
.custom-dropdown[data-modal-dropdown].open .custom-dropdown-trigger {
  border-color: var(--color-brand-primary);
  border-bottom: none;
  border-radius: var(--dropdown-radius) var(--dropdown-radius) 0 0;
  z-index: 10001;
  position: relative;
  background-color: var(--dropdown-bg);
}

/* Trigger text */
.custom-dropdown[data-modal-dropdown] .custom-dropdown-text {
  flex: 1;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* Caret icon */
.custom-dropdown[data-modal-dropdown] .custom-dropdown-caret {
  width: 12px;
  height: 12px;
  flex-shrink: 0;
  color: var(--portal-text-muted);
  transition: transform 0.15s ease;
  margin-left: var(--space-2);
}

.custom-dropdown[data-modal-dropdown].open .custom-dropdown-caret {
  transform: rotate(180deg);
}

/* Dropdown menu - connects seamlessly to trigger */
.custom-dropdown[data-modal-dropdown] .custom-dropdown-menu {
  display: none;
  position: absolute;
  top: 100%;
  left: 0;
  right: 0;
  width: 100%;
  max-height: 200px;
  overflow-y: auto;
  background-color: var(--dropdown-bg);
  border: var(--dropdown-border-width) solid var(--color-brand-primary);
  border-top: none;
  border-radius: 0 0 var(--dropdown-radius) var(--dropdown-radius);
  z-index: 10000;
  list-style: none;
  margin: 0;
  margin-top: calc(var(--dropdown-border-width) * -1);
  padding: 0;
  box-shadow: none;
  box-sizing: border-box;
}

.custom-dropdown[data-modal-dropdown].open .custom-dropdown-menu {
  display: block;
}

/* Dropdown items */
.custom-dropdown[data-modal-dropdown] .custom-dropdown-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: var(--space-4);
  padding: var(--space-3) var(--space-4);
  font-size: var(--font-size-base);
  color: var(--portal-text-light);
  cursor: pointer;
  transition: background-color 0.1s ease;
}

.custom-dropdown[data-modal-dropdown] .custom-dropdown-item:hover {
  background-color: var(--color-brand-primary);
}

/* Item name text */
.custom-dropdown[data-modal-dropdown] .dropdown-item-name {
  display: block;
}

/* ================================================
   Scrollbar Styling for Dropdown Menu
   ================================================ */

.custom-dropdown[data-modal-dropdown] .custom-dropdown-menu::-webkit-scrollbar {
  width: 6px;
}

.custom-dropdown[data-modal-dropdown] .custom-dropdown-menu::-webkit-scrollbar-track {
  background: var(--dropdown-bg);
  border-radius: 3px;
}

.custom-dropdown[data-modal-dropdown] .custom-dropdown-menu::-webkit-scrollbar-thumb {
  background: var(--portal-border-medium);
  border-radius: 3px;
}

.custom-dropdown[data-modal-dropdown] .custom-dropdown-menu::-webkit-scrollbar-thumb:hover {
  background: var(--portal-text-muted);
}
